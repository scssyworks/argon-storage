{"version":3,"file":"index.js","sources":["../../src/api/helpers.js","../../src/api/vars.js","../../src/api/constants.js","../../src/api/cookies.js","../../src/modules/fromCharCode.js","../../src/modules/compress.js","../../src/modules/decompress.js","../../src/modules/utf16.js","../../src/api/storage.js"],"sourcesContent":["/**\n * Returns true if provided value is an object\n * @param {*} value Any value\n */\nfunction isObject(value) {\n    return value && typeof value === 'object';\n}\n\n/**\n * Returns default if original is undefined\n * @param {*} value Original value\n * @param {*} defaultValue Default value\n */\nexport function def(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}\n\n/**\n * Safely trims the value\n * @param {*} value Any value\n */\nexport function trim(value) {\n    return (typeof value === 'string' ? value.trim() : '');\n}\n\n/* eslint-disable */\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref, target) {\n    if (isObject(ref)) {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign() {\n    let i = 0;\n    const target = isObject(arguments[0]) ? arguments[0] : {};\n    for (i = 1; i < arguments.length; i++) {\n        loopFunc(arguments[i], target);\n    }\n    return target;\n}\n/* eslint-enable */\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n    if (arrayObj && arrayObj.length) {\n        for (let index = 0; index < arrayObj.length; index += 1) {\n            if (typeof callback === 'function') {\n                const continueTheLoop = callback.apply(arrayObj, [arrayObj[index], index]);\n                if (typeof continueTheLoop === 'boolean') {\n                    if (continueTheLoop) {\n                        continue;\n                    } else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * Attempts to parse a string value if it can potentially be an object\n * @param {any} value Value\n */\nexport function tryParse(value) {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value;\n    }\n}\n\nexport function hasOwn(ob, prop) {\n    return Object.prototype.hasOwnProperty.call(ob, prop);\n}","const global = window;\n\nconst loc = global.location;\nconst ls = global.localStorage;\nconst ss = global.sessionStorage;\n\nexport { loc, ls, ss };","export const MAX_END_DATE = 'Thu, 31 Dec 2037 00:00:00 GMT';\nexport const COOKIE_DEL_DATE = 'Thu, 01 Jan 1970 00:00:00 UTC';\nexport const MILLISECOND_MULTIPLIER = (24 * 60 * 60 * 1000);\nexport const LOCAL_ENV = ['localhost', '0.0.0.0', '127.0.0.1', null];\nexport const types = {\n    SS: 'sessionStorage',\n    LS: 'localStorage',\n    CC: 'cookie'\n};","import { def, trim, each } from './helpers';\nimport { loc } from './vars';\nimport { MAX_END_DATE, MILLISECOND_MULTIPLIER, LOCAL_ENV, COOKIE_DEL_DATE } from './constants';\n\n/**\n * Sets user cookie\n * @param {string} key name of cookie\n * @param {string} value cookie value\n * @param {string} exp cookie expiry\n * @param {string} path url path\n * @param {string} domain supported domain\n * @param {boolean} isSecure Sets security flag\n */\nexport function setCookie(key, value, expiryDays, path, domain, isSecure) {\n    if (key && typeof value !== 'undefined') {\n        path = def(path, '/');\n        domain = def(domain, loc.hostname);\n        let transformedValue = value;\n        if (typeof value === 'object' && value) {\n            transformedValue = JSON.stringify(value);\n        }\n        let expiryDate = new Date();\n        if (typeof expiryDate === 'number') {\n            if (expiryDays === Infinity) {\n                expiryDate = new Date(MAX_END_DATE);\n            } else {\n                expiryDate.setTime(expiryDate.getTime() + (expiryDays * MILLISECOND_MULTIPLIER));\n            }\n        }\n        const expires = expiryDays ? `; expires=${expiryDate.toUTCString()}` : '';\n        const cookiePath = `; path=${path.trim()}`;\n        const cookieDomain = (LOCAL_ENV.indexOf(domain) === -1) ? `; domain=${domain.trim()}` : '';\n        const secureFlag = (((typeof isSecure === 'boolean' && isSecure)\n            || (typeof isSecure === 'undefined')) && (loc.protocol === 'https:')) ? '; secure' : '';\n        document.cookie = `${key} = ${transformedValue}${expires}${cookieDomain}${cookiePath}${secureFlag}`;\n    }\n}\n\n/**\n * Get's cookie value\n * @param {string} key Key\n * @param {boolean} trimResult Flag to trim the value\n */\nexport function getCookie(key, trimResult) {\n    if (key) {\n        const cookieStr = decodeURIComponent(document.cookie);\n        let value = '';\n        each(cookieStr.split(';'), cookiePair => {\n            const keyPart = `${key}=`;\n            const indexOfKey = cookiePair.indexOf(keyPart);\n            if (indexOfKey > -1) {\n                value = cookiePair.substring((indexOfKey + keyPart.length), cookiePair.length);\n                if (trimResult) {\n                    value = trim(value);\n                }\n                return false;\n            }\n        });\n        return value;\n    }\n    return '';\n}\n\n/**\n * Returns all cookies\n * @param {object|string} matchRegex Regex to filter cookie values\n */\nexport function getAllCookies(matchRegex) {\n    return decodeURIComponent(document.cookie).split(';').map(cookiePair => {\n        const keyValuePair = cookiePair.split('=');\n        const key = trim(keyValuePair[0]);\n        const value = keyValuePair[1];\n        return { key, value };\n    }).filter(obj => {\n        return !!obj.key.match(matchRegex);\n    });\n}\n\n/**\n * Removes a cookie\n * @param {string} key name of cookie\n * @param {string} path url path\n * @param {string} domain supported domain\n */\nexport function removeCookie(key, path, domain) {\n    const currentValue = getCookie.apply(this, [key]);\n    if (key && currentValue.length) {\n        path = def(path, '/');\n        domain = def(domain, loc.hostname);\n        const cookieDomain = LOCAL_ENV.indexOf(domain) === -1 ? `; domain=${domain.trim()}` : '';\n        const deletedCookieString = `${key}=; expires=${COOKIE_DEL_DATE}${cookieDomain}; path=${path}`;\n        document.cookie = deletedCookieString;\n        return !trim(getCookie.apply(this, [key])).length;\n    }\n    return false;\n}","export const f = String.fromCharCode;","import { f } from './fromCharCode';\nimport { hasOwn } from '../api/helpers';\n\nfunction _update(context, bitsPerChar, getCharFromInt) {\n    if (context.context_data_position == bitsPerChar - 1) {\n        context.context_data_position = 0;\n        context.context_data.push(getCharFromInt(context.context_data_val));\n        context.context_data_val = 0;\n    } else {\n        context.context_data_position++;\n    }\n}\n\nfunction _updateContextNumBits(context) {\n    context.context_enlargeIn--;\n    if (context.context_enlargeIn == 0) {\n        context.context_enlargeIn = 2 ** context.context_numBits;\n        context.context_numBits++;\n    }\n}\n\nfunction _updateContext(context, bitsPerChar, getCharFromInt) {\n    if (hasOwn(context.context_dictionaryToCreate, context.context_w)) {\n        if (context.context_w.charCodeAt(0) < 256) {\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1);\n                _update(context, bitsPerChar, getCharFromInt);\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 8; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        } else {\n            context.value = 1;\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1) | context.value;\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = 0;\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 16; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        }\n        _updateContextNumBits(context);\n        delete context.context_dictionaryToCreate[context.context_w];\n    } else {\n        context.value = context.context_dictionary[context.context_w];\n        for (let i = 0; i < context.context_numBits; i++) {\n            context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n            _update(context, bitsPerChar, getCharFromInt);\n            context.value = context.value >> 1;\n        }\n    }\n    _updateContextNumBits(context);\n}\n\nfunction compress(uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) {\n        return '';\n    }\n    const context = {\n        context_dictionary: {},\n        context_dictionaryToCreate: {},\n        context_data: [],\n        context_c: \"\",\n        context_wc: \"\",\n        context_w: \"\",\n        context_enlargeIn: 2,\n        context_dictSize: 3,\n        context_numBits: 2,\n        context_data_val: 0,\n        context_data_position: 0\n    };\n    let i = 0;\n    for (let ii = 0; ii < uncompressed.length; ii += 1) {\n        context.context_c = uncompressed.charAt(ii);\n        if (!hasOwn(context.context_dictionary, context.context_c)) {\n            context.context_dictionary[context.context_c] = context.context_dictSize++;\n            context.context_dictionaryToCreate[context.context_c] = true;\n        }\n        context.context_wc = context.context_w + context.context_c;\n        if (hasOwn(context.context_dictionary, context.context_wc)) {\n            context.context_w = context.context_wc;\n        } else {\n            _updateContext(context, bitsPerChar, getCharFromInt);\n            context.context_dictionary[context.context_wc] = context.context_dictSize++;\n            context.context_w = String(context.context_c);\n        }\n    }\n    if (context.context_w !== \"\") {\n        _updateContext(context, bitsPerChar, getCharFromInt);\n    }\n    context.value = 2;\n    for (i = 0; i < context.context_numBits; i++) {\n        context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n        _update(context, bitsPerChar, getCharFromInt);\n        context.value = context.value >> 1;\n    }\n    // Flush the last char\n    while (true) {\n        context.context_data_val = (context.context_data_val << 1);\n        if (context.context_data_position == bitsPerChar - 1) {\n            context.context_data.push(getCharFromInt(context.context_data_val));\n            break;\n        }\n        else context.context_data_position++;\n    }\n    return context.context_data.join('');\n}\n\nfunction compressImpl(uncompressed) {\n    if (uncompressed == null) {\n        return '';\n    }\n    return compress(uncompressed, 16, (a) => f(a));\n}\n\nexport default compress;\nexport { compressImpl };","import { f } from './fromCharCode';\n\nfunction _commonRep3(data, maxpower, resetValue, getNextValue) {\n    let bits = 0;\n    let power = 1;\n    while (power !== maxpower) {\n        const resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position === 0) {\n            data.position = resetValue;\n            data.val = getNextValue(data.index++);\n        }\n        bits |= (resb > 0 ? 1 : 0) * power;\n        power <<= 1;\n    }\n    return bits;\n}\n\nfunction decompress(length, resetValue, getNextValue) {\n    const dictionary = [];\n    const data = {\n        val: getNextValue(0),\n        position: resetValue,\n        index: 1\n    };\n    const result = [];\n    let enlargeIn = 4;\n    let dictSize = 4;\n    let numBits = 3;\n    let entry = '';\n    let w;\n    let c;\n    for (let i = 0; i < 3; i++) {\n        dictionary[i] = i;\n    }\n    switch (_commonRep3(data, Math.pow(2, 2), resetValue, getNextValue)) {\n        case 0:\n            c = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n            break;\n        case 1:\n            c = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n            break;\n        case 2:\n            return '';\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n        if (data.index > length) {\n            return '';\n        }\n        switch (c = _commonRep3(data, Math.pow(2, numBits), resetValue, getNextValue)) {\n            case 0:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 1:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 2:\n                return result.join('');\n        }\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n        if (dictionary[c]) {\n            entry = dictionary[c];\n        } else {\n            if (c === dictSize) {\n                entry = w + w.charAt(0);\n            } else {\n                return null;\n            }\n        }\n        result.push(entry);\n        dictionary[dictSize++] = w + entry.charAt(0);\n        enlargeIn--;\n        w = entry;\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n    }\n}\n\nfunction decompressImpl(compressed) {\n    if (compressed == null) return '';\n    if (compressed === '') return null;\n    return decompress(compressed, 32768, i => compressed.charCodeAt(i));\n}\n\nexport default decompress;\nexport { decompressImpl };","import compress from './compress';\nimport decompress from './decompress';\nimport { f } from './fromCharCode';\n\nexport function toUTF16(input) {\n    if (input == null) {\n        return '';\n    }\n    return compress(input, 15, (a) => f(a + 32)) + ' ';\n}\n\nexport function fromUTF16(compressed) {\n    if (compressed == null) {\n        return '';\n    }\n    if (compressed === '') {\n        return null;\n    }\n    return decompress(compressed.length, 16384, (index) => (compressed.charCodeAt(index) - 32));\n}","import { ls, ss } from './vars';\nimport { assign, tryParse, hasOwn } from './helpers';\nimport { toUTF16, fromUTF16 } from '../modules/utf16';\nimport { setCookie, getCookie, removeCookie } from './cookies';\nimport { types } from './constants';\n\n/**\n * Tests availability of storage API\n */\nfunction isAvailable() {\n    try {\n        ls.setItem('test', 'test');\n        ls.removeItem('test');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * Sets storage value\n * @param {string} key Key\n * @param {string} value Value\n * @param {string} isSession Flag to store in session storage\n */\nfunction setValue(key, value, isSession) {\n    if (key && typeof value !== 'undefined') {\n        if (typeof value === 'object' && value) {\n            value = JSON.stringify(value);\n        }\n        if (this.available) {\n            const storageObj = isSession ? ss : ls;\n            try {\n                storageObj.setItem(\n                    key,\n                    (this.config.compress ? toUTF16(value) : value)\n                );\n            } catch (e) {\n                setCookie(key, value, isSession ? undefined : Infinity);\n            }\n        } else {\n            setCookie(key, value, isSession ? undefined : Infinity);\n        }\n    }\n}\n\n/**\n * Gets all saved values from storages\n * @param {string} key Key\n */\nfunction getAllMatched(key) {\n    const allValues = [];\n    try {\n        // Local and Session storage\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                if (hasOwn(storageType, key)) {\n                    const value = storageType.getItem(key);\n                    allValues.push({\n                        key,\n                        value: tryParse(this.config.compress ? fromUTF16(value) : value),\n                        type: types[storageType === ls ? 'LS' : 'SS']\n                    });\n                }\n            });\n        }\n        // Cookies\n        const value = getCookie(key);\n        if (value) {\n            allValues.push({\n                key,\n                value: tryParse(value),\n                type: types.CC\n            });\n        }\n    } catch (e) {\n        throw new TypeError(e.message);\n    }\n    return allValues;\n}\n\n/**\n * Removes all keys\n * @param {object|string} matchRegex Regular expression to match keys to be deleted\n */\nfunction deleteKey(key) {\n    try {\n        let hasValues = false;\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                hasValues = hasValues || !!storageType.getItem(key);\n            });\n            if (hasValues) {\n                [ls, ss].forEach(storageType => {\n                    storageType.removeItem(key);\n                });\n            }\n        }\n        const cookieRemoved = removeCookie(key);\n        return (hasValues || cookieRemoved);\n    } catch (e) {\n        return removeCookie(key);\n    }\n}\n\n/**\n * Storage class\n * @class ArgonStorage\n */\nexport class ArgonStorage {\n    constructor(config) {\n        this.config = Object.freeze(assign({ compress: false }, config));\n        this.available = isAvailable();\n    }\n    set() {\n        return setValue.apply(this, arguments);\n    }\n    get() {\n        const matched = this.getAll.apply(this, arguments).filter(obj => {\n            if (arguments[1]) {\n                return obj.type === types.SS;\n            }\n            return true;\n        });\n        if (matched.length > 0) {\n            return matched[0].value;\n        }\n        return;\n    }\n    getAll() {\n        return getAllMatched.apply(this, arguments);\n    }\n    remove() {\n        return deleteKey.apply(this, arguments);\n    }\n}"],"names":["isObject","value","def","defaultValue","trim","loopFunc","ref","target","Object","keys","forEach","key","assign","i","arguments","length","each","arrayObj","callback","index","continueTheLoop","apply","tryParse","JSON","parse","e","hasOwn","ob","prop","prototype","hasOwnProperty","call","global","window","loc","location","ls","localStorage","ss","sessionStorage","MAX_END_DATE","COOKIE_DEL_DATE","MILLISECOND_MULTIPLIER","LOCAL_ENV","types","SS","LS","CC","setCookie","expiryDays","path","domain","isSecure","hostname","transformedValue","stringify","expiryDate","Date","Infinity","setTime","getTime","expires","toUTCString","cookiePath","cookieDomain","indexOf","secureFlag","protocol","document","cookie","getCookie","trimResult","cookieStr","decodeURIComponent","split","cookiePair","keyPart","indexOfKey","substring","getAllCookies","matchRegex","map","keyValuePair","filter","obj","match","removeCookie","currentValue","deletedCookieString","f","String","fromCharCode","_update","context","bitsPerChar","getCharFromInt","context_data_position","context_data","push","context_data_val","_updateContextNumBits","context_enlargeIn","context_numBits","_updateContext","context_dictionaryToCreate","context_w","charCodeAt","context_dictionary","compress","uncompressed","context_c","context_wc","context_dictSize","ii","charAt","join","_commonRep3","data","maxpower","resetValue","getNextValue","bits","power","resb","val","position","decompress","dictionary","result","enlargeIn","dictSize","numBits","entry","w","c","Math","pow","toUTF16","input","a","fromUTF16","compressed","isAvailable","setItem","removeItem","setValue","isSession","available","storageObj","config","undefined","getAllMatched","allValues","storageType","getItem","type","TypeError","message","deleteKey","hasValues","cookieRemoved","ArgonStorage","freeze","matched","getAll"],"mappings":"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"}
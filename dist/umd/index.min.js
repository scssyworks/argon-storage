!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).ArgonStorage={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t){return t&&"object"===e(t)}function r(t,e){return void 0===t?e:t}function i(t){return"string"==typeof t?t.trim():""}function u(t,e){c(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))}function l(t){try{return JSON.parse(t)}catch(e){return t}}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var s=function(){function t(e){n(this,t),this.__v=e}return a(t,[{key:"setValue",value:function(e){return t.match(e)&&(this.__v=e.__v),this}},{key:"getValue",value:function(){return this.__v}}],[{key:"match",value:function(t){return t&&"object"===e(t)&&1===Object.keys(t).length&&f(t,"__v")}}]),t}(),_="undefined"!=typeof location?location:{},v="undefined"!=typeof localStorage?localStorage:{},p="undefined"!=typeof sessionStorage?sessionStorage:{},d="undefined"!=typeof document?document:{},x=["localhost","0.0.0.0","127.0.0.1",null],h={SS:"sessionStorage",LS:"localStorage",CC:"cookie"};function y(t,n,o,a,c,i){if(t&&void 0!==n){a=r(a,"/"),c=r(c,_.hostname);var u=n;"object"===e(n)&&n&&(u=JSON.stringify(n));var l=new Date;"number"==typeof o&&(o===1/0?l=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):l.setTime(l.getTime()+864e5*o));var f=o?"; expires=".concat(l.toUTCString()):"",s="; path=".concat(a.trim()),v=-1===x.indexOf(c)?"; domain=".concat(c.trim()):"",p=("boolean"==typeof i&&i||void 0===i)&&"https:"===_.protocol?"; secure":"";d.cookie="".concat(t," = ").concat(u).concat(f).concat(v).concat(s).concat(p)}}function m(t,e){if(t){var n=decodeURIComponent(d.cookie),o="";return function(t,e){if(t&&t.length)for(var n=0;n<t.length;n+=1)if("function"==typeof e){var o=e.apply(t,[t[n],n]);if("boolean"==typeof o){if(o)continue;break}}}(n.split(";"),(function(n){var a="".concat(t,"="),c=n.indexOf(a);if(c>-1)return o=n.substring(c+a.length,n.length),e&&(o=i(o)),!1})),o}return""}function g(t,e,n){var o=m.apply(this,[t]);if(t&&o.length){e=r(e,"/"),n=r(n,_.hostname);var a=-1===x.indexOf(n)?"; domain=".concat(n.trim()):"",c="".concat(t,"=; expires=").concat("Thu, 01 Jan 1970 00:00:00 UTC").concat(a,"; path=").concat(e);return d.cookie=c,!i(m.apply(this,[t])).length}return!1}var w=String.fromCharCode;function b(t,e,n){t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++}function k(t){t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++)}function S(t,e,n){if(f(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(var o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1,b(t,e,n);t.value=t.context_w.charCodeAt(0);for(var a=0;a<8;a++)t.context_data_val=t.context_data_val<<1|1&t.value,b(t,e,n),t.value=t.value>>1}else{t.value=1;for(var c=0;c<t.context_numBits;c++)t.context_data_val=t.context_data_val<<1|t.value,b(t,e,n),t.value=0;t.value=t.context_w.charCodeAt(0);for(var r=0;r<16;r++)t.context_data_val=t.context_data_val<<1|1&t.value,b(t,e,n),t.value=t.value>>1}k(t),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(var i=0;i<t.context_numBits;i++)t.context_data_val=t.context_data_val<<1|1&t.value,b(t,e,n),t.value=t.value>>1}k(t)}function C(t,e,n,o){for(var a=0,c=1;c!==e;){var r=t.val&t.position;t.position>>=1,0===t.position&&(t.position=n,t.val=o(t.index++)),a|=(r>0?1:0)*c,c<<=1}return a}function j(t){return null==t?"":function(t,e,n){if(null==t)return"";for(var o={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0},a=0,c=0;c<t.length;c+=1)o.context_c=t.charAt(c),f(o.context_dictionary,o.context_c)||(o.context_dictionary[o.context_c]=o.context_dictSize++,o.context_dictionaryToCreate[o.context_c]=!0),o.context_wc=o.context_w+o.context_c,f(o.context_dictionary,o.context_wc)?o.context_w=o.context_wc:(S(o,e,n),o.context_dictionary[o.context_wc]=o.context_dictSize++,o.context_w=String(o.context_c));for(""!==o.context_w&&S(o,e,n),o.value=2,a=0;a<o.context_numBits;a++)o.context_data_val=o.context_data_val<<1|1&o.value,b(o,e,n),o.value=o.value>>1;for(;;){if(o.context_data_val=o.context_data_val<<1,o.context_data_position==e-1){o.context_data.push(n(o.context_data_val));break}o.context_data_position++}return o.context_data.join("")}(t,15,(function(t){return w(t+32)}))+" "}function O(t){return null==t?"":""===t?null:function(t,e,n){for(var o,a,c=[],r={val:n(0),position:e,index:1},i=[],u=4,l=4,f=3,s="",_=0;_<3;_++)c[_]=_;switch(C(r,Math.pow(2,2),e,n)){case 0:a=w(C(r,Math.pow(2,8),e,n));break;case 1:a=w(C(r,Math.pow(2,16),e,n));break;case 2:return""}for(c[3]=a,o=a,i.push(a);;){if(r.index>t)return"";switch(a=C(r,Math.pow(2,f),e,n)){case 0:c[l++]=w(C(r,Math.pow(2,8),e,n)),a=l-1,u--;break;case 1:c[l++]=w(C(r,Math.pow(2,16),e,n)),a=l-1,u--;break;case 2:return i.join("")}if(0===u&&(u=Math.pow(2,f),f++),c[a])s=c[a];else{if(a!==l)return null;s=o+o.charAt(0)}i.push(s),c[l++]=o+s.charAt(0),o=s,0===--u&&(u=Math.pow(2,f),f++)}}(t.length,16384,(function(e){return t.charCodeAt(e)-32}))}function T(t,n,o){if(t&&void 0!==n)if(n=JSON.stringify(n&&"object"===e(n)?n:new s(n)),this.available){var a=o?p:v;try{a.setItem(t,this.config.compress?j(n):n)}catch(e){y(t,n,o?void 0:1/0)}}else y(t,n,o?void 0:1/0)}function I(t){return s.match(t)?(new s).setValue(t).getValue():t}function A(t){var e=this,n=[];try{this.available&&[v,p].forEach((function(o){if(f(o,t)){var a=o.getItem(t),c=I(l(e.config.compress?O(a):a));n.push({key:t,value:c,type:h[o===v?"LS":"SS"]})}}));var o=I(l(m(t)));o&&n.push({key:t,value:o,type:h.CC})}catch(t){throw new TypeError(t.message)}return n}function M(t){try{var e=!1;this.available&&([v,p].forEach((function(n){e=e||!!n.getItem(t)})),e&&[v,p].forEach((function(e){e.removeItem(t)})));var n=g(t);return e||n}catch(e){return g(t)}}var B=function(){function t(e){n(this,t),this.config=Object.freeze(function(){var t=0,e=c(arguments[0])?arguments[0]:{};for(t=1;t<arguments.length;t++)u(arguments[t],e);return e}({compress:!1},e))}return a(t,[{key:"set",value:function(){return T.apply(this,arguments)}},{key:"get",value:function(){var t=arguments,e=this.getAll.apply(this,arguments).filter((function(e){return!t[1]||e.type===h.SS}));if(e.length>0)return e[0].value}},{key:"getAll",value:function(){return A.apply(this,arguments)}},{key:"remove",value:function(){return M.apply(this,arguments)}},{key:"available",get:function(){return function(){try{return v.setItem("test","test"),v.removeItem("test"),!0}catch(t){return!1}}()}}]),t}();t.compress=j,t.decompress=O,t.default=B,t.getAllCookies=function(t){return decodeURIComponent(d.cookie).split(";").map((function(t){var e=t.split("=");return{key:i(e[0]),value:e[1]}})).filter((function(e){return!!e.key.match(t)}))},t.getCookie=m,t.removeCookie=g,t.setCookie=y,Object.defineProperty(t,"__esModule",{value:!0})}));

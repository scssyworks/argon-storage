!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ArgonStorage={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function u(t){return t&&"object"===e(t)}function l(t){return"string"==typeof t?t.trim():""}function f(t,e){u(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))}function s(t){try{return JSON.parse(t)}catch(e){return t}}function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var d=function(){function t(e){n(this,t),a(this,"__v",void 0),this.__v=e}return r(t,[{key:"setValue",value:function(e){return t.match(e)&&(this.__v=e.__v),this}},{key:"getValue",value:function(){return this.__v}}],[{key:"match",value:function(t){return t&&"object"===e(t)&&1===Object.keys(t).length&&v(t,"__v")}}]),t}(),_="undefined"!=typeof location?location:{},h="undefined"!=typeof localStorage?localStorage:{},p="undefined"!=typeof sessionStorage?sessionStorage:{},y="undefined"!=typeof document?document:{},x=["localhost","0.0.0.0","127.0.0.1",null],g={SS:"sessionStorage",LS:"localStorage",CC:"cookie"};function m(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_.hostname,c=arguments.length>5?arguments[5]:void 0;if(t&&void 0!==n){var i=n;"object"===e(n)&&n&&(i=JSON.stringify(n));var u=new Date;"number"==typeof o&&(o===1/0?u=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):u.setTime(u.getTime()+864e5*o));var l=o?"; expires=".concat(u.toUTCString()):"",f="; path=".concat(r.trim()),s=-1===x.indexOf(a)?"; domain=".concat(a.trim()):"",v=("boolean"==typeof c&&c||void 0===c)&&"https:"===_.protocol?"; secure":"";y.cookie="".concat(t," = ").concat(i).concat(l).concat(s).concat(f).concat(v)}}function w(t,e){if(t){var n,o="",r=i(decodeURIComponent(y.cookie).split(";"));try{for(r.s();!(n=r.n()).done;){var a=n.value,c="".concat(t,"="),u=a.indexOf(c);if(u>-1){o=a.substring(u+c.length,a.length),e&&(o=l(o));break}}}catch(t){r.e(t)}finally{r.f()}return o}return""}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.hostname,o=w.apply(this,[t]);if(t&&o.length){var r=-1===x.indexOf(n)?"; domain=".concat(n.trim()):"",a="".concat(t,"=; expires=").concat("Thu, 01 Jan 1970 00:00:00 UTC").concat(r,"; path=").concat(e);return y.cookie=a,!l(w.apply(this,[t])).length}return!1}var S=String.fromCharCode;function k(t,e,n){t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++}function C(t){t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++)}function A(t,e,n){if(v(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(var o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1,k(t,e,n);t.value=t.context_w.charCodeAt(0);for(var r=0;r<8;r++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}else{t.value=1;for(var a=0;a<t.context_numBits;a++)t.context_data_val=t.context_data_val<<1|t.value,k(t,e,n),t.value=0;t.value=t.context_w.charCodeAt(0);for(var c=0;c<16;c++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}C(t),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(var i=0;i<t.context_numBits;i++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}C(t)}function T(t,e,n,o){for(var r=0,a=1;a!==e;){var c=t.val&t.position;t.position>>=1,0===t.position&&(t.position=n,t.val=o(t.index++)),r|=(c>0?1:0)*a,a<<=1}return r}function j(t){return null==t?"":function(t,e,n){if(null==t)return"";for(var o={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0},r=0,a=0;a<t.length;a+=1)o.context_c=t.charAt(a),v(o.context_dictionary,o.context_c)||(o.context_dictionary[o.context_c]=o.context_dictSize++,o.context_dictionaryToCreate[o.context_c]=!0),o.context_wc=o.context_w+o.context_c,v(o.context_dictionary,o.context_wc)?o.context_w=o.context_wc:(A(o,e,n),o.context_dictionary[o.context_wc]=o.context_dictSize++,o.context_w=String(o.context_c));for(""!==o.context_w&&A(o,e,n),o.value=2,r=0;r<o.context_numBits;r++)o.context_data_val=o.context_data_val<<1|1&o.value,k(o,e,n),o.value=o.value>>1;for(;;){if(o.context_data_val=o.context_data_val<<1,o.context_data_position==e-1){o.context_data.push(n(o.context_data_val));break}o.context_data_position++}return o.context_data.join("")}(t,15,(function(t){return S(t+32)}))+" "}function O(t){return null==t?"":""===t?null:function(t,e,n){for(var o,r,a=[],c={val:n(0),position:e,index:1},i=[],u=4,l=4,f=3,s="",v=0;v<3;v++)a[v]=v;switch(T(c,Math.pow(2,2),e,n)){case 0:r=S(T(c,Math.pow(2,8),e,n));break;case 1:r=S(T(c,Math.pow(2,16),e,n));break;case 2:return""}for(a[3]=r,o=r,i.push(r);;){if(c.index>t)return"";switch(r=T(c,Math.pow(2,f),e,n)){case 0:a[l++]=S(T(c,Math.pow(2,8),e,n)),r=l-1,u--;break;case 1:a[l++]=S(T(c,Math.pow(2,16),e,n)),r=l-1,u--;break;case 2:return i.join("")}if(0===u&&(u=Math.pow(2,f),f++),a[r])s=a[r];else{if(r!==l)return null;s=o+o.charAt(0)}i.push(s),a[l++]=o+s.charAt(0),o=s,0===--u&&(u=Math.pow(2,f),f++)}}(t.length,16384,(function(e){return t.charCodeAt(e)-32}))}function I(t,n,o){if(t&&void 0!==n)if(n=JSON.stringify(n&&"object"===e(n)?n:new d(n)),this.available){var r=o?p:h;try{r.setItem(t,this.config.compress?j(n):n)}catch(e){m(t,n,o?void 0:1/0)}}else m(t,n,o?void 0:1/0)}function M(t){return d.match(t)?(new d).setValue(t).getValue():t}function E(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=n[0],a=[];try{this.available&&[h,p].forEach((function(e){if(v(e,r)){var n=e.getItem(r),o=M(s(t.config.compress?O(n):n));a.push({key:r,value:o,type:g[e===h?"LS":"SS"]})}}));var c=w(r),i=M(s(c));i&&a.push({key:r,value:i,type:g.CC})}catch(t){throw new TypeError(t.message)}return a}function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e[0];try{var r=!1;this.available&&([h,p].forEach((function(t){r=r||!!t.getItem(o)})),r&&[h,p].forEach((function(t){t.removeItem(o)})));var a=b(o);return r||a}catch(t){return b(o)}}var U=new WeakMap,z=function(){function t(e){n(this,t),U.set(this,{writable:!0,value:void 0}),a(this,"config",void 0),this.config=Object.freeze(function(){var t=0,e=u(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:{};for(t=1;t<arguments.length;t++)f(t<0||arguments.length<=t?void 0:arguments[t],e);return e}({compress:!1},e)),function(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}}(this,U,function(){try{return h.setItem("test","test"),h.removeItem("test"),!0}catch(t){return!1}}())}return r(t,[{key:"set",value:function(t,e,n){return I.apply(this,[t,e,n])}},{key:"get",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=this.getAll.apply(this,e).filter((function(t){return!e[1]||t.type===g.SS}));if(o.length>0)return o[0].value}},{key:"getAll",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return E.apply(this,e)}},{key:"remove",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return B.apply(this,e)}},{key:"available",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,U)}}]),t}();t.compress=j,t.decompress=O,t.default=z,t.getAllCookies=function(t){return decodeURIComponent(y.cookie).split(";").map((function(t){var e=t.split("=");return{key:l(e[0]),value:e[1]}})).filter((function(e){return!!e.key.match(t)}))},t.getCookie=w,t.removeCookie=b,t.setCookie=m,Object.defineProperty(t,"__esModule",{value:!0})}));

{"version":3,"file":"index.esm.js","sources":["../../src/api/helpers.ts","../../src/api/vars.ts","../../src/api/constants.ts","../../src/api/cookies.ts","../../src/modules/fromCharCode.ts","../../src/modules/compress.ts","../../src/modules/decompress.ts","../../src/modules/utf16.ts","../../src/api/storage.ts"],"sourcesContent":["/**\n * Returns true if provided value is an object\n * @param {*} value Any value\n */\nfunction isObject(value: any): boolean {\n    return value && typeof value === 'object';\n}\n\n/**\n * Safely trims the value\n * @param {*} value Any value\n */\nexport function trim(value: any) {\n    return (typeof value === 'string' ? value.trim() : '');\n}\n\n/* eslint-disable */\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref: any, target: any): void {\n    if (isObject(ref)) {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign(...args: any[]) {\n    let i = 0;\n    const target = isObject(args[0]) ? args[0] : {};\n    for (i = 1; i < args.length; i++) {\n        loopFunc(args[i], target);\n    }\n    return target;\n}\n/* eslint-enable */\n\n/**\n * Attempts to parse a string value if it can potentially be an object\n * @param {any} value Value\n */\nexport function tryParse(value: any) {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value;\n    }\n}\n\nexport function hasOwn(ob: any, prop: (string | number | symbol)) {\n    return Object.prototype.hasOwnProperty.call(ob, prop);\n}\n\nexport class TypeResolver {\n    __v: any;\n    constructor(value?: any) {\n        this.__v = value;\n    }\n    static match(value: any): boolean {\n        return (value && typeof value === 'object' && Object.keys(value).length === 1 && hasOwn(value, '__v'));\n    }\n    setValue(value: any): TypeResolver {\n        if (TypeResolver.match(value)) {\n            this.__v = value.__v;\n        }\n        return this;\n    }\n    getValue(): any {\n        return this.__v;\n    }\n}","const loc = (typeof location !== 'undefined' ? location : {}) as Location;\nconst ls = (typeof localStorage !== 'undefined' ? localStorage : {}) as Storage;\nconst ss = (typeof sessionStorage !== 'undefined' ? sessionStorage : {}) as Storage;\nconst doc = (typeof document !== 'undefined' ? document : {}) as Document;\n\nexport { loc, ls, ss, doc };","export const MAX_END_DATE = 'Thu, 31 Dec 2037 00:00:00 GMT';\nexport const COOKIE_DEL_DATE = 'Thu, 01 Jan 1970 00:00:00 UTC';\nexport const MILLISECOND_MULTIPLIER = (24 * 60 * 60 * 1000);\nexport const LOCAL_ENV = ['localhost', '0.0.0.0', '127.0.0.1', null];\nexport const types = {\n    SS: 'sessionStorage',\n    LS: 'localStorage',\n    CC: 'cookie'\n};","import { trim } from './helpers';\nimport { loc, doc } from './vars';\nimport { MAX_END_DATE, MILLISECOND_MULTIPLIER, LOCAL_ENV, COOKIE_DEL_DATE } from './constants';\n\n/**\n * Sets user cookie\n * @param {string} key name of cookie\n * @param {any} value cookie value\n * @param {number} exp cookie expiry\n * @param {string} path url path\n * @param {string} domain supported domain\n * @param {boolean} isSecure Sets security flag\n */\nexport function setCookie(\n    key: string,\n    value: any,\n    expiryDays?: number,\n    path = '/',\n    domain = loc.hostname,\n    isSecure?: boolean\n): void {\n    if (key && typeof value !== 'undefined') {\n        let transformedValue = value;\n        if (typeof value === 'object' && value) {\n            transformedValue = JSON.stringify(value);\n        }\n        let expiryDate = new Date();\n        if (typeof expiryDays === 'number') {\n            if (expiryDays === Infinity) {\n                expiryDate = new Date(MAX_END_DATE);\n            } else {\n                expiryDate.setTime(expiryDate.getTime() + (expiryDays * MILLISECOND_MULTIPLIER));\n            }\n        }\n        const expires = expiryDays ? `; expires=${expiryDate.toUTCString()}` : '';\n        const cookiePath = `; path=${path.trim()}`;\n        const cookieDomain = (LOCAL_ENV.indexOf(domain) === -1) ? `; domain=${domain.trim()}` : '';\n        const secureFlag = (((typeof isSecure === 'boolean' && isSecure)\n            || (typeof isSecure === 'undefined')) && (loc.protocol === 'https:')) ? '; secure' : '';\n        doc.cookie = `${key} = ${transformedValue}${expires}${cookieDomain}${cookiePath}${secureFlag}`;\n    }\n}\n\n/**\n * Get's cookie value\n * @param {string} key Key\n * @param {boolean} trimResult Flag to trim the value\n */\nexport function getCookie(\n    key: string,\n    trimResult?: boolean\n): string {\n    if (key) {\n        const cookieStr = decodeURIComponent(doc.cookie);\n        let value = '';\n        for (const cookiePair of cookieStr.split(';')) {\n            const keyPart = `${key}=`;\n            const indexOfKey = cookiePair.indexOf(keyPart);\n            if (indexOfKey > -1) {\n                value = cookiePair.substring((indexOfKey + keyPart.length), cookiePair.length);\n                if (trimResult) {\n                    value = trim(value);\n                }\n                break;\n            }\n        }\n        return value;\n    }\n    return '';\n}\n\n/**\n * Returns all cookies\n * @param {object|string} matchRegex Regex to filter cookie values\n */\nexport function getAllCookies(\n    matchRegex: RegExp\n): {\n    key: string,\n    value: string\n}[] {\n    return decodeURIComponent(doc.cookie).split(';').map(cookiePair => {\n        const keyValuePair = cookiePair.split('=');\n        const key = trim(keyValuePair[0]);\n        const value = keyValuePair[1];\n        return { key, value };\n    }).filter(obj => {\n        return !!obj.key.match(matchRegex);\n    });\n}\n\n/**\n * Removes a cookie\n * @param {string} key name of cookie\n * @param {string} path url path\n * @param {string} domain supported domain\n */\nexport function removeCookie(\n    key: string,\n    path = '/',\n    domain = loc.hostname\n): boolean {\n    const currentValue = getCookie.apply(this, [key]);\n    if (key && currentValue.length) {\n        const cookieDomain = LOCAL_ENV.indexOf(domain) === -1 ? `; domain=${domain.trim()}` : '';\n        const deletedCookieString = `${key}=; expires=${COOKIE_DEL_DATE}${cookieDomain}; path=${path}`;\n        doc.cookie = deletedCookieString;\n        return !trim(getCookie.apply(this, [key])).length;\n    }\n    return false;\n}","export const f = String.fromCharCode;","import { f } from './fromCharCode';\nimport { hasOwn } from '../api/helpers';\n\nfunction _update(context: any, bitsPerChar: any, getCharFromInt: any): void {\n    if (context.context_data_position == bitsPerChar - 1) {\n        context.context_data_position = 0;\n        context.context_data.push(getCharFromInt(context.context_data_val));\n        context.context_data_val = 0;\n    } else {\n        context.context_data_position++;\n    }\n}\n\nfunction _updateContextNumBits(context: any): void {\n    context.context_enlargeIn--;\n    if (context.context_enlargeIn == 0) {\n        context.context_enlargeIn = 2 ** context.context_numBits;\n        context.context_numBits++;\n    }\n}\n\nfunction _updateContext(context: any, bitsPerChar: any, getCharFromInt: any): void {\n    if (hasOwn(context.context_dictionaryToCreate, context.context_w)) {\n        if (context.context_w.charCodeAt(0) < 256) {\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1);\n                _update(context, bitsPerChar, getCharFromInt);\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 8; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        } else {\n            context.value = 1;\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1) | context.value;\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = 0;\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 16; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        }\n        _updateContextNumBits(context);\n        delete context.context_dictionaryToCreate[context.context_w];\n    } else {\n        context.value = context.context_dictionary[context.context_w];\n        for (let i = 0; i < context.context_numBits; i++) {\n            context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n            _update(context, bitsPerChar, getCharFromInt);\n            context.value = context.value >> 1;\n        }\n    }\n    _updateContextNumBits(context);\n}\n\nfunction compress(uncompressed: any, bitsPerChar: any, getCharFromInt: any): any {\n    if (uncompressed == null) {\n        return '';\n    }\n    const context: { [key: string]: any } = {\n        context_dictionary: {} as any,\n        context_dictionaryToCreate: {} as any,\n        context_data: [],\n        context_c: \"\",\n        context_wc: \"\",\n        context_w: \"\",\n        context_enlargeIn: 2,\n        context_dictSize: 3,\n        context_numBits: 2,\n        context_data_val: 0,\n        context_data_position: 0\n    };\n    let i = 0;\n    for (let ii = 0; ii < uncompressed.length; ii += 1) {\n        context.context_c = uncompressed.charAt(ii);\n        if (!hasOwn(context.context_dictionary, context.context_c)) {\n            context.context_dictionary[context.context_c] = context.context_dictSize++;\n            context.context_dictionaryToCreate[context.context_c] = true;\n        }\n        context.context_wc = context.context_w + context.context_c;\n        if (hasOwn(context.context_dictionary, context.context_wc)) {\n            context.context_w = context.context_wc;\n        } else {\n            _updateContext(context, bitsPerChar, getCharFromInt);\n            context.context_dictionary[context.context_wc] = context.context_dictSize++;\n            context.context_w = String(context.context_c);\n        }\n    }\n    if (context.context_w !== \"\") {\n        _updateContext(context, bitsPerChar, getCharFromInt);\n    }\n    context.value = 2;\n    for (i = 0; i < context.context_numBits; i++) {\n        context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n        _update(context, bitsPerChar, getCharFromInt);\n        context.value = context.value >> 1;\n    }\n    // Flush the last char\n    while (true) {\n        context.context_data_val = (context.context_data_val << 1);\n        if (context.context_data_position == bitsPerChar - 1) {\n            context.context_data.push(getCharFromInt(context.context_data_val));\n            break;\n        }\n        else context.context_data_position++;\n    }\n    return context.context_data.join('');\n}\n\nfunction compressImpl(uncompressed: any) {\n    if (uncompressed == null) {\n        return '';\n    }\n    return compress(uncompressed, 16, (a: any) => f(a));\n}\n\nexport default compress;\nexport { compressImpl };","import { f } from './fromCharCode';\n\nfunction _commonRep3(data: any, maxpower: any, resetValue: any, getNextValue: any): any {\n    let bits = 0;\n    let power = 1;\n    while (power !== maxpower) {\n        const resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position === 0) {\n            data.position = resetValue;\n            data.val = getNextValue(data.index++);\n        }\n        bits |= (resb > 0 ? 1 : 0) * power;\n        power <<= 1;\n    }\n    return bits;\n}\n\nfunction decompress(length: any, resetValue: any, getNextValue: any): any {\n    const dictionary = [];\n    const data = {\n        val: getNextValue(0),\n        position: resetValue,\n        index: 1\n    };\n    const result = [];\n    let enlargeIn = 4;\n    let dictSize = 4;\n    let numBits = 3;\n    let entry: any = '';\n    let w;\n    let c;\n    for (let i = 0; i < 3; i++) {\n        dictionary[i] = i;\n    }\n    switch (_commonRep3(data, Math.pow(2, 2), resetValue, getNextValue)) {\n        case 0:\n            c = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n            break;\n        case 1:\n            c = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n            break;\n        case 2:\n            return '';\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n        if (data.index > length) {\n            return '';\n        }\n        switch (c = _commonRep3(data, Math.pow(2, numBits), resetValue, getNextValue)) {\n            case 0:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 1:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 2:\n                return result.join('');\n        }\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n        if (dictionary[c]) {\n            entry = dictionary[c];\n        } else {\n            if (c === dictSize) {\n                entry = w + w.charAt(0);\n            } else {\n                return null;\n            }\n        }\n        result.push(entry);\n        dictionary[dictSize++] = w + entry.charAt(0);\n        enlargeIn--;\n        w = entry;\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n    }\n}\n\nfunction decompressImpl(compressed: any): any {\n    if (compressed == null) return '';\n    if (compressed === '') return null;\n    return decompress(compressed, 32768, (i: any) => compressed.charCodeAt(i));\n}\n\nexport default decompress;\nexport { decompressImpl };","import compress from './compress';\nimport decompress from './decompress';\nimport { f } from './fromCharCode';\n\nexport function toUTF16(input: any) {\n    if (input == null) {\n        return '';\n    }\n    return compress(input, 15, (a: any) => f(a + 32)) + ' ';\n}\n\nexport function fromUTF16(compressed: any) {\n    if (compressed == null) {\n        return '';\n    }\n    if (compressed === '') {\n        return null;\n    }\n    return decompress(compressed.length, 16384, (index: any) => (compressed.charCodeAt(index) - 32));\n}","import { ls, ss } from './vars';\nimport { assign, tryParse, hasOwn, TypeResolver } from './helpers';\nimport { toUTF16, fromUTF16 } from '../modules/utf16';\nimport { setCookie, getCookie, removeCookie } from './cookies';\nimport { types } from './constants';\n\n/**\n * Tests availability of storage API\n */\nfunction isAvailable(): boolean {\n    try {\n        ls.setItem('test', 'test');\n        ls.removeItem('test');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * Sets storage value\n * @param {string} key Key\n * @param {string} value Value\n * @param {string} isSession Flag to store in session storage\n */\nfunction setValue(key: string, value: any, isSession?: boolean) {\n    if (key && typeof value !== 'undefined') {\n        value = JSON.stringify(\n            (value && typeof value === 'object')\n                ? value\n                : new TypeResolver(value)\n        );\n        if (this.available) {\n            const storageObj = isSession ? ss : ls;\n            try {\n                storageObj.setItem(\n                    key,\n                    (this.config.compress ? toUTF16(value) : value)\n                );\n            } catch (e) {\n                setCookie(key, value, isSession ? undefined : Infinity);\n            }\n        } else {\n            setCookie(key, value, isSession ? undefined : Infinity);\n        }\n    }\n}\n\n/**\n * Resolves the current value currectly\n * @param {any} value Input value\n */\nfunction valueResolver(value: any): any {\n    return TypeResolver.match(value)\n        ? (new TypeResolver().setValue(value)).getValue()\n        : value;\n}\n\n/**\n * Gets all saved values from storages\n * @param {string} key Key\n */\nfunction getAllMatched(...args: string[]): {\n    key: string;\n    value: any;\n    type: string;\n}[] {\n    const [key] = args;\n    const allValues = [];\n    try {\n        // Local and Session storage\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                if (hasOwn(storageType, key)) {\n                    const storageVal = storageType.getItem(key);\n                    const value = valueResolver(tryParse(\n                        this.config.compress\n                            ? fromUTF16(storageVal)\n                            : storageVal\n                    ));\n                    allValues.push({\n                        key,\n                        value,\n                        type: types[storageType === ls ? 'LS' : 'SS']\n                    });\n                }\n            });\n        }\n        // Cookies\n        const cookieValue = getCookie(key);\n        const value = valueResolver(tryParse(cookieValue));\n        if (value) {\n            allValues.push({\n                key,\n                value,\n                type: types.CC\n            });\n        }\n    } catch (e) {\n        throw new TypeError(e.message);\n    }\n    return allValues;\n}\n\n/**\n * Removes all keys\n * @param {object|string} matchRegex Regular expression to match keys to be deleted\n */\nfunction deleteKey(...args: string[]) {\n    const [key] = args;\n    try {\n        let hasValues = false;\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                hasValues = hasValues || !!storageType.getItem(key);\n            });\n            if (hasValues) {\n                [ls, ss].forEach(storageType => {\n                    storageType.removeItem(key);\n                });\n            }\n        }\n        const cookieRemoved = removeCookie(key);\n        return (hasValues || cookieRemoved);\n    } catch (e) {\n        return removeCookie(key);\n    }\n}\n\n/**\n * Storage class\n * @class ArgonStorage\n */\nexport class ArgonStorage {\n    #available: boolean;\n    config: {\n        compress?: boolean;\n    };\n    constructor(config?: {\n        compress: boolean\n    }) {\n        this.config = Object.freeze(assign({ compress: false }, config));\n        this.#available = isAvailable();\n    }\n\n    get available(): boolean {\n        return this.#available;\n    }\n\n    set(key: string, value: any, isSession?: boolean) {\n        return setValue.apply(this, [key, value, isSession]);\n    }\n    get(...args: any[]) {\n        const matched = this.getAll.apply(this, args).filter(obj => {\n            if (args[1]) {\n                return obj.type === types.SS;\n            }\n            return true;\n        });\n        if (matched.length > 0) {\n            return matched[0].value;\n        }\n        return;\n    }\n    getAll(...args: any[]) {\n        return getAllMatched.apply(this, args);\n    }\n    remove(...args: any[]) {\n        return deleteKey.apply(this, args);\n    }\n}"],"names":["isObject","value","trim","loopFunc","ref","target","Object","keys","forEach","key","assign","i","length","tryParse","JSON","parse","e","hasOwn","ob","prop","prototype","hasOwnProperty","call","TypeResolver","__v","match","loc","location","ls","localStorage","ss","sessionStorage","doc","document","MAX_END_DATE","COOKIE_DEL_DATE","MILLISECOND_MULTIPLIER","LOCAL_ENV","types","SS","LS","CC","setCookie","expiryDays","path","domain","hostname","isSecure","transformedValue","stringify","expiryDate","Date","Infinity","setTime","getTime","expires","toUTCString","cookiePath","cookieDomain","indexOf","secureFlag","protocol","cookie","getCookie","trimResult","cookieStr","decodeURIComponent","split","cookiePair","keyPart","indexOfKey","substring","getAllCookies","matchRegex","map","keyValuePair","filter","obj","removeCookie","currentValue","apply","deletedCookieString","f","String","fromCharCode","_update","context","bitsPerChar","getCharFromInt","context_data_position","context_data","push","context_data_val","_updateContextNumBits","context_enlargeIn","context_numBits","_updateContext","context_dictionaryToCreate","context_w","charCodeAt","context_dictionary","compress","uncompressed","context_c","context_wc","context_dictSize","ii","charAt","join","_commonRep3","data","maxpower","resetValue","getNextValue","bits","power","resb","val","position","index","decompress","dictionary","result","enlargeIn","dictSize","numBits","entry","w","c","Math","pow","toUTF16","input","a","fromUTF16","compressed","isAvailable","setItem","removeItem","setValue","isSession","available","storageObj","config","undefined","valueResolver","getValue","getAllMatched","args","allValues","storageType","storageVal","getItem","type","cookieValue","TypeError","message","deleteKey","hasValues","cookieRemoved","ArgonStorage","freeze","matched","getAll"],"mappings":"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"}
{"version":3,"file":"index.esm.js","sources":["../../src/api/helpers.js","../../src/api/vars.js","../../src/api/constants.js","../../src/api/cookies.js","../../src/modules/fromCharCode.js","../../src/modules/compress.js","../../src/modules/decompress.js","../../src/modules/utf16.js","../../src/api/storage.js"],"sourcesContent":["/**\n * Returns true if provided value is an object\n * @param {*} value Any value\n */\nfunction isObject(value) {\n    return value && typeof value === 'object';\n}\n\n/**\n * Returns default if original is undefined\n * @param {*} value Original value\n * @param {*} defaultValue Default value\n */\nexport function def(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}\n\n/**\n * Safely trims the value\n * @param {*} value Any value\n */\nexport function trim(value) {\n    return (typeof value === 'string' ? value.trim() : '');\n}\n\n/* eslint-disable */\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref, target) {\n    if (isObject(ref)) {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign() {\n    let i = 0;\n    const target = isObject(arguments[0]) ? arguments[0] : {};\n    for (i = 1; i < arguments.length; i++) {\n        loopFunc(arguments[i], target);\n    }\n    return target;\n}\n/* eslint-enable */\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n    if (arrayObj && arrayObj.length) {\n        for (let index = 0; index < arrayObj.length; index += 1) {\n            if (typeof callback === 'function') {\n                const continueTheLoop = callback.apply(arrayObj, [arrayObj[index], index]);\n                if (typeof continueTheLoop === 'boolean') {\n                    if (continueTheLoop) {\n                        continue;\n                    } else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * Attempts to parse a string value if it can potentially be an object\n * @param {any} value Value\n */\nexport function tryParse(value) {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value;\n    }\n}\n\nexport function hasOwn(ob, prop) {\n    return Object.prototype.hasOwnProperty.call(ob, prop);\n}\n\nexport class TypeResolver {\n    constructor(value) {\n        this.__v = value;\n    }\n    static match(value) {\n        return (value && typeof value === 'object' && Object.keys(value).length === 1 && hasOwn(value, '__v'));\n    }\n    setValue(value) {\n        if (TypeResolver.match(value)) {\n            this.__v = value.__v;\n        }\n        return this;\n    }\n    getValue() {\n        return this.__v;\n    }\n}","const loc = typeof location !== 'undefined' ? location : {};\nconst ls = typeof localStorage !== 'undefined' ? localStorage : {};\nconst ss = typeof sessionStorage !== 'undefined' ? sessionStorage : {};\nconst doc = typeof document !== 'undefined' ? document : {};\n\nexport { loc, ls, ss, doc };","export const MAX_END_DATE = 'Thu, 31 Dec 2037 00:00:00 GMT';\nexport const COOKIE_DEL_DATE = 'Thu, 01 Jan 1970 00:00:00 UTC';\nexport const MILLISECOND_MULTIPLIER = (24 * 60 * 60 * 1000);\nexport const LOCAL_ENV = ['localhost', '0.0.0.0', '127.0.0.1', null];\nexport const types = {\n    SS: 'sessionStorage',\n    LS: 'localStorage',\n    CC: 'cookie'\n};","import { def, trim, each } from './helpers';\nimport { loc, doc } from './vars';\nimport { MAX_END_DATE, MILLISECOND_MULTIPLIER, LOCAL_ENV, COOKIE_DEL_DATE } from './constants';\n\n/**\n * Sets user cookie\n * @param {string} key name of cookie\n * @param {string} value cookie value\n * @param {string} exp cookie expiry\n * @param {string} path url path\n * @param {string} domain supported domain\n * @param {boolean} isSecure Sets security flag\n */\nexport function setCookie(key, value, expiryDays, path, domain, isSecure) {\n    if (key && typeof value !== 'undefined') {\n        path = def(path, '/');\n        domain = def(domain, loc.hostname);\n        let transformedValue = value;\n        if (typeof value === 'object' && value) {\n            transformedValue = JSON.stringify(value);\n        }\n        let expiryDate = new Date();\n        if (typeof expiryDays === 'number') {\n            if (expiryDays === Infinity) {\n                expiryDate = new Date(MAX_END_DATE);\n            } else {\n                expiryDate.setTime(expiryDate.getTime() + (expiryDays * MILLISECOND_MULTIPLIER));\n            }\n        }\n        const expires = expiryDays ? `; expires=${expiryDate.toUTCString()}` : '';\n        const cookiePath = `; path=${path.trim()}`;\n        const cookieDomain = (LOCAL_ENV.indexOf(domain) === -1) ? `; domain=${domain.trim()}` : '';\n        const secureFlag = (((typeof isSecure === 'boolean' && isSecure)\n            || (typeof isSecure === 'undefined')) && (loc.protocol === 'https:')) ? '; secure' : '';\n        doc.cookie = `${key} = ${transformedValue}${expires}${cookieDomain}${cookiePath}${secureFlag}`;\n    }\n}\n\n/**\n * Get's cookie value\n * @param {string} key Key\n * @param {boolean} trimResult Flag to trim the value\n */\nexport function getCookie(key, trimResult) {\n    if (key) {\n        const cookieStr = decodeURIComponent(doc.cookie);\n        let value = '';\n        each(cookieStr.split(';'), cookiePair => {\n            const keyPart = `${key}=`;\n            const indexOfKey = cookiePair.indexOf(keyPart);\n            if (indexOfKey > -1) {\n                value = cookiePair.substring((indexOfKey + keyPart.length), cookiePair.length);\n                if (trimResult) {\n                    value = trim(value);\n                }\n                return false;\n            }\n        });\n        return value;\n    }\n    return '';\n}\n\n/**\n * Returns all cookies\n * @param {object|string} matchRegex Regex to filter cookie values\n */\nexport function getAllCookies(matchRegex) {\n    return decodeURIComponent(doc.cookie).split(';').map(cookiePair => {\n        const keyValuePair = cookiePair.split('=');\n        const key = trim(keyValuePair[0]);\n        const value = keyValuePair[1];\n        return { key, value };\n    }).filter(obj => {\n        return !!obj.key.match(matchRegex);\n    });\n}\n\n/**\n * Removes a cookie\n * @param {string} key name of cookie\n * @param {string} path url path\n * @param {string} domain supported domain\n */\nexport function removeCookie(key, path, domain) {\n    const currentValue = getCookie.apply(this, [key]);\n    if (key && currentValue.length) {\n        path = def(path, '/');\n        domain = def(domain, loc.hostname);\n        const cookieDomain = LOCAL_ENV.indexOf(domain) === -1 ? `; domain=${domain.trim()}` : '';\n        const deletedCookieString = `${key}=; expires=${COOKIE_DEL_DATE}${cookieDomain}; path=${path}`;\n        doc.cookie = deletedCookieString;\n        return !trim(getCookie.apply(this, [key])).length;\n    }\n    return false;\n}","export const f = String.fromCharCode;","import { f } from './fromCharCode';\nimport { hasOwn } from '../api/helpers';\n\nfunction _update(context, bitsPerChar, getCharFromInt) {\n    if (context.context_data_position == bitsPerChar - 1) {\n        context.context_data_position = 0;\n        context.context_data.push(getCharFromInt(context.context_data_val));\n        context.context_data_val = 0;\n    } else {\n        context.context_data_position++;\n    }\n}\n\nfunction _updateContextNumBits(context) {\n    context.context_enlargeIn--;\n    if (context.context_enlargeIn == 0) {\n        context.context_enlargeIn = 2 ** context.context_numBits;\n        context.context_numBits++;\n    }\n}\n\nfunction _updateContext(context, bitsPerChar, getCharFromInt) {\n    if (hasOwn(context.context_dictionaryToCreate, context.context_w)) {\n        if (context.context_w.charCodeAt(0) < 256) {\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1);\n                _update(context, bitsPerChar, getCharFromInt);\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 8; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        } else {\n            context.value = 1;\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1) | context.value;\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = 0;\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 16; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                _update(context, bitsPerChar, getCharFromInt);\n                context.value = context.value >> 1;\n            }\n        }\n        _updateContextNumBits(context);\n        delete context.context_dictionaryToCreate[context.context_w];\n    } else {\n        context.value = context.context_dictionary[context.context_w];\n        for (let i = 0; i < context.context_numBits; i++) {\n            context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n            _update(context, bitsPerChar, getCharFromInt);\n            context.value = context.value >> 1;\n        }\n    }\n    _updateContextNumBits(context);\n}\n\nfunction compress(uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) {\n        return '';\n    }\n    const context = {\n        context_dictionary: {},\n        context_dictionaryToCreate: {},\n        context_data: [],\n        context_c: \"\",\n        context_wc: \"\",\n        context_w: \"\",\n        context_enlargeIn: 2,\n        context_dictSize: 3,\n        context_numBits: 2,\n        context_data_val: 0,\n        context_data_position: 0\n    };\n    let i = 0;\n    for (let ii = 0; ii < uncompressed.length; ii += 1) {\n        context.context_c = uncompressed.charAt(ii);\n        if (!hasOwn(context.context_dictionary, context.context_c)) {\n            context.context_dictionary[context.context_c] = context.context_dictSize++;\n            context.context_dictionaryToCreate[context.context_c] = true;\n        }\n        context.context_wc = context.context_w + context.context_c;\n        if (hasOwn(context.context_dictionary, context.context_wc)) {\n            context.context_w = context.context_wc;\n        } else {\n            _updateContext(context, bitsPerChar, getCharFromInt);\n            context.context_dictionary[context.context_wc] = context.context_dictSize++;\n            context.context_w = String(context.context_c);\n        }\n    }\n    if (context.context_w !== \"\") {\n        _updateContext(context, bitsPerChar, getCharFromInt);\n    }\n    context.value = 2;\n    for (i = 0; i < context.context_numBits; i++) {\n        context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n        _update(context, bitsPerChar, getCharFromInt);\n        context.value = context.value >> 1;\n    }\n    // Flush the last char\n    while (true) {\n        context.context_data_val = (context.context_data_val << 1);\n        if (context.context_data_position == bitsPerChar - 1) {\n            context.context_data.push(getCharFromInt(context.context_data_val));\n            break;\n        }\n        else context.context_data_position++;\n    }\n    return context.context_data.join('');\n}\n\nfunction compressImpl(uncompressed) {\n    if (uncompressed == null) {\n        return '';\n    }\n    return compress(uncompressed, 16, (a) => f(a));\n}\n\nexport default compress;\nexport { compressImpl };","import { f } from './fromCharCode';\n\nfunction _commonRep3(data, maxpower, resetValue, getNextValue) {\n    let bits = 0;\n    let power = 1;\n    while (power !== maxpower) {\n        const resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position === 0) {\n            data.position = resetValue;\n            data.val = getNextValue(data.index++);\n        }\n        bits |= (resb > 0 ? 1 : 0) * power;\n        power <<= 1;\n    }\n    return bits;\n}\n\nfunction decompress(length, resetValue, getNextValue) {\n    const dictionary = [];\n    const data = {\n        val: getNextValue(0),\n        position: resetValue,\n        index: 1\n    };\n    const result = [];\n    let enlargeIn = 4;\n    let dictSize = 4;\n    let numBits = 3;\n    let entry = '';\n    let w;\n    let c;\n    for (let i = 0; i < 3; i++) {\n        dictionary[i] = i;\n    }\n    switch (_commonRep3(data, Math.pow(2, 2), resetValue, getNextValue)) {\n        case 0:\n            c = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n            break;\n        case 1:\n            c = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n            break;\n        case 2:\n            return '';\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n        if (data.index > length) {\n            return '';\n        }\n        switch (c = _commonRep3(data, Math.pow(2, numBits), resetValue, getNextValue)) {\n            case 0:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 8), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 1:\n                dictionary[dictSize++] = f(_commonRep3(data, Math.pow(2, 16), resetValue, getNextValue));\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 2:\n                return result.join('');\n        }\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n        if (dictionary[c]) {\n            entry = dictionary[c];\n        } else {\n            if (c === dictSize) {\n                entry = w + w.charAt(0);\n            } else {\n                return null;\n            }\n        }\n        result.push(entry);\n        dictionary[dictSize++] = w + entry.charAt(0);\n        enlargeIn--;\n        w = entry;\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n    }\n}\n\nfunction decompressImpl(compressed) {\n    if (compressed == null) return '';\n    if (compressed === '') return null;\n    return decompress(compressed, 32768, i => compressed.charCodeAt(i));\n}\n\nexport default decompress;\nexport { decompressImpl };","import compress from './compress';\nimport decompress from './decompress';\nimport { f } from './fromCharCode';\n\nexport function toUTF16(input) {\n    if (input == null) {\n        return '';\n    }\n    return compress(input, 15, (a) => f(a + 32)) + ' ';\n}\n\nexport function fromUTF16(compressed) {\n    if (compressed == null) {\n        return '';\n    }\n    if (compressed === '') {\n        return null;\n    }\n    return decompress(compressed.length, 16384, (index) => (compressed.charCodeAt(index) - 32));\n}","import { ls, ss } from './vars';\nimport { assign, tryParse, hasOwn, TypeResolver } from './helpers';\nimport { toUTF16, fromUTF16 } from '../modules/utf16';\nimport { setCookie, getCookie, removeCookie } from './cookies';\nimport { types } from './constants';\n\n/**\n * Tests availability of storage API\n */\nfunction isAvailable() {\n    try {\n        ls.setItem('test', 'test');\n        ls.removeItem('test');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * Sets storage value\n * @param {string} key Key\n * @param {string} value Value\n * @param {string} isSession Flag to store in session storage\n */\nfunction setValue(key, value, isSession) {\n    if (key && typeof value !== 'undefined') {\n        value = JSON.stringify(\n            (value && typeof value === 'object')\n                ? value\n                : new TypeResolver(value)\n        );\n        if (this.available) {\n            const storageObj = isSession ? ss : ls;\n            try {\n                storageObj.setItem(\n                    key,\n                    (this.config.compress ? toUTF16(value) : value)\n                );\n            } catch (e) {\n                setCookie(key, value, isSession ? undefined : Infinity);\n            }\n        } else {\n            setCookie(key, value, isSession ? undefined : Infinity);\n        }\n    }\n}\n\n/**\n * Resolves the current value currectly\n * @param {any} value Input value\n */\nfunction valueResolver(value) {\n    return TypeResolver.match(value)\n        ? (new TypeResolver().setValue(value)).getValue()\n        : value;\n}\n\n/**\n * Gets all saved values from storages\n * @param {string} key Key\n */\nfunction getAllMatched(key) {\n    const allValues = [];\n    try {\n        // Local and Session storage\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                if (hasOwn(storageType, key)) {\n                    const storageVal = storageType.getItem(key);\n                    const value = valueResolver(tryParse(\n                        this.config.compress\n                            ? fromUTF16(storageVal)\n                            : storageVal\n                    ));\n                    allValues.push({\n                        key,\n                        value,\n                        type: types[storageType === ls ? 'LS' : 'SS']\n                    });\n                }\n            });\n        }\n        // Cookies\n        const cookieValue = getCookie(key);\n        const value = valueResolver(tryParse(cookieValue));\n        if (value) {\n            allValues.push({\n                key,\n                value,\n                type: types.CC\n            });\n        }\n    } catch (e) {\n        throw new TypeError(e.message);\n    }\n    return allValues;\n}\n\n/**\n * Removes all keys\n * @param {object|string} matchRegex Regular expression to match keys to be deleted\n */\nfunction deleteKey(key) {\n    try {\n        let hasValues = false;\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                hasValues = hasValues || !!storageType.getItem(key);\n            });\n            if (hasValues) {\n                [ls, ss].forEach(storageType => {\n                    storageType.removeItem(key);\n                });\n            }\n        }\n        const cookieRemoved = removeCookie(key);\n        return (hasValues || cookieRemoved);\n    } catch (e) {\n        return removeCookie(key);\n    }\n}\n\n/**\n * Storage class\n * @class ArgonStorage\n */\nexport class ArgonStorage {\n    constructor(config) {\n        this.config = Object.freeze(assign({ compress: false }, config));\n    }\n\n    get available() {\n        return isAvailable();\n    }\n\n    set() {\n        return setValue.apply(this, arguments);\n    }\n    get() {\n        const matched = this.getAll.apply(this, arguments).filter(obj => {\n            if (arguments[1]) {\n                return obj.type === types.SS;\n            }\n            return true;\n        });\n        if (matched.length > 0) {\n            return matched[0].value;\n        }\n        return;\n    }\n    getAll() {\n        return getAllMatched.apply(this, arguments);\n    }\n    remove() {\n        return deleteKey.apply(this, arguments);\n    }\n}"],"names":["isObject","value","def","defaultValue","trim","loopFunc","ref","target","Object","keys","forEach","key","assign","i","arguments","length","each","arrayObj","callback","index","continueTheLoop","apply","tryParse","JSON","parse","e","hasOwn","ob","prop","prototype","hasOwnProperty","call","TypeResolver","__v","match","loc","location","ls","localStorage","ss","sessionStorage","doc","document","MAX_END_DATE","COOKIE_DEL_DATE","MILLISECOND_MULTIPLIER","LOCAL_ENV","types","SS","LS","CC","setCookie","expiryDays","path","domain","isSecure","hostname","transformedValue","stringify","expiryDate","Date","Infinity","setTime","getTime","expires","toUTCString","cookiePath","cookieDomain","indexOf","secureFlag","protocol","cookie","getCookie","trimResult","cookieStr","decodeURIComponent","split","cookiePair","keyPart","indexOfKey","substring","getAllCookies","matchRegex","map","keyValuePair","filter","obj","removeCookie","currentValue","deletedCookieString","f","String","fromCharCode","_update","context","bitsPerChar","getCharFromInt","context_data_position","context_data","push","context_data_val","_updateContextNumBits","context_enlargeIn","context_numBits","_updateContext","context_dictionaryToCreate","context_w","charCodeAt","context_dictionary","compress","uncompressed","context_c","context_wc","context_dictSize","ii","charAt","join","_commonRep3","data","maxpower","resetValue","getNextValue","bits","power","resb","val","position","decompress","dictionary","result","enlargeIn","dictSize","numBits","entry","w","c","Math","pow","toUTF16","input","a","fromUTF16","compressed","isAvailable","setItem","removeItem","setValue","isSession","available","storageObj","config","undefined","valueResolver","getValue","getAllMatched","allValues","storageType","storageVal","getItem","type","cookieValue","TypeError","message","deleteKey","hasValues","cookieRemoved","ArgonStorage","freeze","matched","getAll"],"mappings":"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"}
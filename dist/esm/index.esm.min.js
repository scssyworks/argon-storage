function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw c}}}}function i(e){return e&&"object"===t(e)}function u(t){return"string"==typeof t?t.trim():""}function l(t,e){i(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))}function f(t){try{return JSON.parse(t)}catch(e){return t}}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var v=function(){function n(t){e(this,n),a(this,"__v",void 0),this.__v=t}return o(n,[{key:"setValue",value:function(t){return n.match(t)&&(this.__v=t.__v),this}},{key:"getValue",value:function(){return this.__v}}],[{key:"match",value:function(e){return e&&"object"===t(e)&&1===Object.keys(e).length&&s(e,"__v")}}]),n}(),_="undefined"!=typeof location?location:{},d="undefined"!=typeof localStorage?localStorage:{},h="undefined"!=typeof sessionStorage?sessionStorage:{},p="undefined"!=typeof document?document:{},y=["localhost","0.0.0.0","127.0.0.1",null],x={SS:"sessionStorage",LS:"localStorage",CC:"cookie"};function m(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_.hostname,c=arguments.length>5?arguments[5]:void 0;if(e&&void 0!==n){var i=n;"object"===t(n)&&n&&(i=JSON.stringify(n));var u=new Date;"number"==typeof o&&(o===1/0?u=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):u.setTime(u.getTime()+864e5*o));var l=o?"; expires=".concat(u.toUTCString()):"",f="; path=".concat(a.trim()),s=-1===y.indexOf(r)?"; domain=".concat(r.trim()):"",v=("boolean"==typeof c&&c||void 0===c)&&"https:"===_.protocol?"; secure":"";p.cookie="".concat(e," = ").concat(i).concat(l).concat(s).concat(f).concat(v)}}function g(t,e){if(t){var n,o="",a=c(decodeURIComponent(p.cookie).split(";"));try{for(a.s();!(n=a.n()).done;){var r=n.value,i="".concat(t,"="),l=r.indexOf(i);if(l>-1){o=r.substring(l+i.length,r.length),e&&(o=u(o));break}}}catch(t){a.e(t)}finally{a.f()}return o}return""}function w(t){return decodeURIComponent(p.cookie).split(";").map((function(t){var e=t.split("=");return{key:u(e[0]),value:e[1]}})).filter((function(e){return!!e.key.match(t)}))}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.hostname,o=g.apply(this,[t]);if(t&&o.length){var a=-1===y.indexOf(n)?"; domain=".concat(n.trim()):"",r="".concat(t,"=; expires=").concat("Thu, 01 Jan 1970 00:00:00 UTC").concat(a,"; path=").concat(e);return p.cookie=r,!u(g.apply(this,[t])).length}return!1}var S=String.fromCharCode;function k(t,e,n){t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++}function C(t){t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=Math.pow(2,t.context_numBits),t.context_numBits++)}function T(t,e,n){if(s(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(var o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1,k(t,e,n);t.value=t.context_w.charCodeAt(0);for(var a=0;a<8;a++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}else{t.value=1;for(var r=0;r<t.context_numBits;r++)t.context_data_val=t.context_data_val<<1|t.value,k(t,e,n),t.value=0;t.value=t.context_w.charCodeAt(0);for(var c=0;c<16;c++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}C(t),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(var i=0;i<t.context_numBits;i++)t.context_data_val=t.context_data_val<<1|1&t.value,k(t,e,n),t.value=t.value>>1}C(t)}function j(t,e,n,o){for(var a=0,r=1;r!==e;){var c=t.val&t.position;t.position>>=1,0===t.position&&(t.position=n,t.val=o(t.index++)),a|=(c>0?1:0)*r,r<<=1}return a}function A(t){return null==t?"":function(t,e,n){if(null==t)return"";for(var o={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0},a=0,r=0;r<t.length;r+=1)o.context_c=t.charAt(r),s(o.context_dictionary,o.context_c)||(o.context_dictionary[o.context_c]=o.context_dictSize++,o.context_dictionaryToCreate[o.context_c]=!0),o.context_wc=o.context_w+o.context_c,s(o.context_dictionary,o.context_wc)?o.context_w=o.context_wc:(T(o,e,n),o.context_dictionary[o.context_wc]=o.context_dictSize++,o.context_w=String(o.context_c));for(""!==o.context_w&&T(o,e,n),o.value=2,a=0;a<o.context_numBits;a++)o.context_data_val=o.context_data_val<<1|1&o.value,k(o,e,n),o.value=o.value>>1;for(;;){if(o.context_data_val=o.context_data_val<<1,o.context_data_position==e-1){o.context_data.push(n(o.context_data_val));break}o.context_data_position++}return o.context_data.join("")}(t,15,(function(t){return S(t+32)}))+" "}function I(t){return null==t?"":""===t?null:function(t,e,n){for(var o,a,r=[],c={val:n(0),position:e,index:1},i=[],u=4,l=4,f=3,s="",v=0;v<3;v++)r[v]=v;switch(j(c,Math.pow(2,2),e,n)){case 0:a=S(j(c,Math.pow(2,8),e,n));break;case 1:a=S(j(c,Math.pow(2,16),e,n));break;case 2:return""}for(r[3]=a,o=a,i.push(a);;){if(c.index>t)return"";switch(a=j(c,Math.pow(2,f),e,n)){case 0:r[l++]=S(j(c,Math.pow(2,8),e,n)),a=l-1,u--;break;case 1:r[l++]=S(j(c,Math.pow(2,16),e,n)),a=l-1,u--;break;case 2:return i.join("")}if(0===u&&(u=Math.pow(2,f),f++),r[a])s=r[a];else{if(a!==l)return null;s=o+o.charAt(0)}i.push(s),r[l++]=o+s.charAt(0),o=s,0===--u&&(u=Math.pow(2,f),f++)}}(t.length,16384,(function(e){return t.charCodeAt(e)-32}))}function O(e,n,o){if(e&&void 0!==n)if(n=JSON.stringify(n&&"object"===t(n)?n:new v(n)),this.available){var a=o?h:d;try{a.setItem(e,this.config.compress?A(n):n)}catch(t){m(e,n,o?void 0:1/0)}}else m(e,n,o?void 0:1/0)}function M(t){return v.match(t)?(new v).setValue(t).getValue():t}function E(t){var e=this,n=[];try{this.available&&[d,h].forEach((function(o){if(s(o,t)){var a=o.getItem(t),r=M(f(e.config.compress?I(a):a));n.push({key:t,value:r,type:x[o===d?"LS":"SS"]})}}));var o=M(f(g(t)));o&&n.push({key:t,value:o,type:x.CC})}catch(t){throw new TypeError(t.message)}return n}function B(t){try{var e=!1;this.available&&([d,h].forEach((function(n){e=e||!!n.getItem(t)})),e&&[d,h].forEach((function(e){e.removeItem(t)})));var n=b(t);return e||n}catch(e){return b(t)}}var U=new WeakMap,z=function(){function t(n){e(this,t),U.set(this,{writable:!0,value:void 0}),a(this,"config",void 0),this.config=Object.freeze(function(){var t=0,e=i(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:{};for(t=1;t<arguments.length;t++)l(t<0||arguments.length<=t?void 0:arguments[t],e);return e}({compress:!1},n)),function(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}}(this,U,function(){try{return d.setItem("test","test"),d.removeItem("test"),!0}catch(t){return!1}}())}return o(t,[{key:"set",value:function(t,e,n){return O.apply(this,[t,e,n])}},{key:"get",value:function(t,e){var n=this.getAll.apply(this,[t]).filter((function(t){return!e||t.type===x.SS}));if(n.length>0)return n[0].value}},{key:"getAll",value:function(t){return E.apply(this,[t])}},{key:"remove",value:function(t){return B.apply(this,[t])}},{key:"available",get:function(){return function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}(this,U)}}]),t}();export default z;export{A as compress,I as decompress,w as getAllCookies,g as getCookie,b as removeCookie,m as setCookie};

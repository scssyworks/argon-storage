function t(t){return t&&"object"==typeof t}function e(t,e){return void 0===t?e:t}function n(t){return"string"==typeof t?t.trim():""}function o(e,n){t(e)&&Object.keys(e).forEach((function(t){n[t]=e[t]}))}function c(t){try{return JSON.parse(t)}catch(e){return t}}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const i=location,r=localStorage,l=sessionStorage,s=["localhost","0.0.0.0","127.0.0.1",null],u={SS:"sessionStorage",LS:"localStorage",CC:"cookie"};function _(t,n,o,c,a,r){if(t&&void 0!==n){c=e(c,"/"),a=e(a,i.hostname);let l=n;"object"==typeof n&&n&&(l=JSON.stringify(n));let u=new Date;"number"==typeof u&&(o===1/0?u=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):u.setTime(u.getTime()+864e5*o));const _=o?"; expires="+u.toUTCString():"",x="; path="+c.trim(),f=-1===s.indexOf(a)?"; domain="+a.trim():"",p=("boolean"==typeof r&&r||void 0===r)&&"https:"===i.protocol?"; secure":"";document.cookie=`${t} = ${l}${_}${f}${x}${p}`}}function x(t,e){if(t){const o=decodeURIComponent(document.cookie);let c="";return function(t,e){if(t&&t.length)for(let n=0;n<t.length;n+=1)if("function"==typeof e){const o=e.apply(t,[t[n],n]);if("boolean"==typeof o){if(o)continue;break}}}(o.split(";"),o=>{const a=t+"=",i=o.indexOf(a);if(i>-1)return c=o.substring(i+a.length,o.length),e&&(c=n(c)),!1}),c}return""}function f(t){return decodeURIComponent(document.cookie).split(";").map(t=>{const e=t.split("=");return{key:n(e[0]),value:e[1]}}).filter(e=>!!e.key.match(t))}function p(t,o,c){const a=x.apply(this,[t]);if(t&&a.length){o=e(o,"/"),c=e(c,i.hostname);const a=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC${-1===s.indexOf(c)?"; domain="+c.trim():""}; path=${o}`;return document.cookie=a,!n(x.apply(this,[t])).length}return!1}const d=String.fromCharCode;function h(t,e,n){t.context_data_position==e-1?(t.context_data_position=0,t.context_data.push(n(t.context_data_val)),t.context_data_val=0):t.context_data_position++}function v(t){t.context_enlargeIn--,0==t.context_enlargeIn&&(t.context_enlargeIn=2**t.context_numBits,t.context_numBits++)}function y(t,e,n){if(a(t.context_dictionaryToCreate,t.context_w)){if(t.context_w.charCodeAt(0)<256){for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1,h(t,e,n);t.value=t.context_w.charCodeAt(0);for(let o=0;o<8;o++)t.context_data_val=t.context_data_val<<1|1&t.value,h(t,e,n),t.value=t.value>>1}else{t.value=1;for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1|t.value,h(t,e,n),t.value=0;t.value=t.context_w.charCodeAt(0);for(let o=0;o<16;o++)t.context_data_val=t.context_data_val<<1|1&t.value,h(t,e,n),t.value=t.value>>1}v(t),delete t.context_dictionaryToCreate[t.context_w]}else{t.value=t.context_dictionary[t.context_w];for(let o=0;o<t.context_numBits;o++)t.context_data_val=t.context_data_val<<1|1&t.value,h(t,e,n),t.value=t.value>>1}v(t)}function m(t,e,n,o){let c=0,a=1;for(;a!==e;){const e=t.val&t.position;t.position>>=1,0===t.position&&(t.position=n,t.val=o(t.index++)),c|=(e>0?1:0)*a,a<<=1}return c}function g(t){return null==t?"":function(t,e,n){if(null==t)return"";const o={context_dictionary:{},context_dictionaryToCreate:{},context_data:[],context_c:"",context_wc:"",context_w:"",context_enlargeIn:2,context_dictSize:3,context_numBits:2,context_data_val:0,context_data_position:0};let c=0;for(let c=0;c<t.length;c+=1)o.context_c=t.charAt(c),a(o.context_dictionary,o.context_c)||(o.context_dictionary[o.context_c]=o.context_dictSize++,o.context_dictionaryToCreate[o.context_c]=!0),o.context_wc=o.context_w+o.context_c,a(o.context_dictionary,o.context_wc)?o.context_w=o.context_wc:(y(o,e,n),o.context_dictionary[o.context_wc]=o.context_dictSize++,o.context_w=String(o.context_c));for(""!==o.context_w&&y(o,e,n),o.value=2,c=0;c<o.context_numBits;c++)o.context_data_val=o.context_data_val<<1|1&o.value,h(o,e,n),o.value=o.value>>1;for(;;){if(o.context_data_val=o.context_data_val<<1,o.context_data_position==e-1){o.context_data.push(n(o.context_data_val));break}o.context_data_position++}return o.context_data.join("")}(t,15,t=>d(t+32))+" "}function w(t){return null==t?"":""===t?null:function(t,e,n){const o=[],c={val:n(0),position:e,index:1},a=[];let i,r,l=4,s=4,u=3,_="";for(let t=0;t<3;t++)o[t]=t;switch(m(c,Math.pow(2,2),e,n)){case 0:r=d(m(c,Math.pow(2,8),e,n));break;case 1:r=d(m(c,Math.pow(2,16),e,n));break;case 2:return""}for(o[3]=r,i=r,a.push(r);;){if(c.index>t)return"";switch(r=m(c,Math.pow(2,u),e,n)){case 0:o[s++]=d(m(c,Math.pow(2,8),e,n)),r=s-1,l--;break;case 1:o[s++]=d(m(c,Math.pow(2,16),e,n)),r=s-1,l--;break;case 2:return a.join("")}if(0===l&&(l=Math.pow(2,u),u++),o[r])_=o[r];else{if(r!==s)return null;_=i+i.charAt(0)}a.push(_),o[s++]=i+_.charAt(0),l--,i=_,0===l&&(l=Math.pow(2,u),u++)}}(t.length,16384,e=>t.charCodeAt(e)-32)}function S(t,e,n){if(t&&void 0!==e)if("object"==typeof e&&e&&(e=JSON.stringify(e)),this.available){const o=n?l:r;try{o.setItem(t,this.config.compress?g(e):e)}catch(o){_(t,e,n?void 0:1/0)}}else _(t,e,n?void 0:1/0)}function b(t){const e=[];try{this.available&&[r,l].forEach(n=>{if(a(n,t)){const o=n.getItem(t);e.push({key:t,value:c(this.config.compress?w(o):o),type:u[n===r?"LS":"SS"]})}});const n=x(t);n&&e.push({key:t,value:c(n),type:u.CC})}catch(t){throw new TypeError(t.message)}return e}function C(t){try{let e=!1;this.available&&([r,l].forEach(n=>{e=e||!!n.getItem(t)}),e&&[r,l].forEach(e=>{e.removeItem(t)}));const n=p(t);return e||n}catch(e){return p(t)}}export default class{constructor(e){this.config=Object.freeze(function(){let e=0;const n=t(arguments[0])?arguments[0]:{};for(e=1;e<arguments.length;e++)o(arguments[e],n);return n}({compress:!1},e)),this.available=function(){try{return r.setItem("test","test"),r.removeItem("test"),!0}catch(t){return!1}}()}set(){return S.apply(this,arguments)}get(){const t=this.getAll.apply(this,arguments).filter(t=>!arguments[1]||t.type===u.SS);if(t.length>0)return t[0].value}getAll(){return b.apply(this,arguments)}remove(){return C.apply(this,arguments)}}export{g as compress,w as decompress,f as getAllCookies,x as getCookie,p as removeCookie,_ as setCookie};

{"version":3,"file":"argon-storage.js","sources":["../../src/api/helpers.js","../../src/api/vars.js","../../src/api/constants.js","../../src/api/cookies.js","../../src/modules/fromCharCode.js","../../src/modules/compress.js","../../src/modules/decompress.js","../../src/modules/utf16.js","../../src/api/storage.js"],"sourcesContent":["/**\n * Returns true if provided value is an object\n * @param {*} value Any value\n */\nfunction isObject(value) {\n    return value && typeof value === 'object';\n}\n\n/**\n * Returns default if original is undefined\n * @param {*} value Original value\n * @param {*} defaultValue Default value\n */\nexport function setDefault(value, defaultValue) {\n    if (typeof value === 'undefined') {\n        return defaultValue;\n    }\n    return value;\n}\n\n/**\n * Safely trims the value\n * @param {*} value Any value\n */\nexport function trim(value) {\n    return (typeof value === 'string' ? value.trim() : '');\n}\n\n/* eslint-disable */\n\n/**\n * Inner loop function for assign\n * @private\n * @param {object} ref Argument object\n * @param {object} target First object\n */\nfunction loopFunc(ref, target) {\n    if (isObject(ref)) {\n        Object.keys(ref).forEach(function (key) {\n            target[key] = ref[key];\n        });\n    }\n}\n\n/**\n * Polyfill for Object.assign only smaller and with less features\n * @private\n * @returns {object}\n */\nexport function assign() {\n    let i = 0;\n    const target = isObject(arguments[0]) ? arguments[0] : {};\n    for (i = 1; i < arguments.length; i++) {\n        loopFunc(arguments[i], target);\n    }\n    return target;\n}\n/* eslint-enable */\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n    if (arrayObj && arrayObj.length) {\n        for (let index = 0; index < arrayObj.length; index += 1) {\n            if (typeof callback === 'function') {\n                const continueTheLoop = callback.apply(arrayObj, [arrayObj[index], index]);\n                if (typeof continueTheLoop === 'boolean') {\n                    if (continueTheLoop) {\n                        continue;\n                    } else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * Attempts to parse a string value if it can potentially be an object\n * @param {any} value Value\n */\nexport function tryParse(value) {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value;\n    }\n}","export const loc = window.location;\nexport const ls = window.localStorage;\nexport const ss = window.sessionStorage;\nexport const hasOwn = Object.prototype.hasOwnProperty;","export const MAX_END_DATE = 'Thu, 31 Dec 2037 00:00:00 GMT';\nexport const COOKIE_DEL_DATE = 'Thu, 01 Jan 1970 00:00:00 UTC';\nexport const MILLISECOND_MULTIPLIER = (24 * 60 * 60 * 1000);\nexport const LOCAL_ENV = ['localhost', '0.0.0.0', '127.0.0.1', null];\nexport const types = {\n    SS: 'sessionStorage',\n    LS: 'localStorage',\n    CC: 'cookie'\n};","import { setDefault, trim, each } from './helpers';\nimport { loc } from './vars';\nimport { MAX_END_DATE, MILLISECOND_MULTIPLIER, LOCAL_ENV, COOKIE_DEL_DATE } from './constants';\n\n/**\n * Sets user cookie\n * @param {string} key name of cookie\n * @param {string} value cookie value\n * @param {string} exp cookie expiry\n * @param {string} path url path\n * @param {string} domain supported domain\n * @param {boolean} isSecure Sets security flag\n */\nexport function setCookie(key, value, expiryDays, path, domain, isSecure) {\n    if (key && typeof value !== 'undefined') {\n        path = setDefault(path, '/');\n        domain = setDefault(domain, loc.hostname);\n        let transformedValue = value;\n        if (typeof value === 'object' && value) {\n            transformedValue = JSON.stringify(value);\n        }\n        let expiryDate = new Date();\n        if (typeof expiryDate === 'number') {\n            if (expiryDays === Infinity) {\n                expiryDate = new Date(MAX_END_DATE);\n            } else {\n                expiryDate.setTime(expiryDate.getTime() + (expiryDays * MILLISECOND_MULTIPLIER));\n            }\n        }\n        const expires = expiryDays ? `; expires=${expiryDate.toUTCString()}` : '';\n        const cookiePath = `; path=${path.trim()}`;\n        const cookieDomain = (LOCAL_ENV.indexOf(domain) === -1) ? `; domain=${domain.trim()}` : '';\n        const secureFlag = (((typeof isSecure === 'boolean' && isSecure)\n            || (typeof isSecure === 'undefined')) && (loc.protocol === 'https:')) ? '; secure' : '';\n        document.cookie = `${key} = ${transformedValue}${expires}${cookieDomain}${cookiePath}${secureFlag}`;\n    }\n}\n\n/**\n * Get's cookie value\n * @param {string} key Key\n * @param {boolean} trimResult Flag to trim the value\n */\nexport function getCookie(key, trimResult) {\n    if (key) {\n        const cookieStr = decodeURIComponent(document.cookie);\n        let value = '';\n        each(cookieStr.split(';'), cookiePair => {\n            const keyPart = `${key}=`;\n            const indexOfKey = cookiePair.indexOf(keyPart);\n            if (indexOfKey > -1) {\n                value = cookiePair.substring((indexOfKey + keyPart.length), cookiePair.length);\n                if (trimResult) {\n                    value = trim(value);\n                }\n                return false;\n            }\n        });\n        return value;\n    }\n    return '';\n}\n\n/**\n * Returns all cookies\n * @param {object|string} matchRegex Regex to filter cookie values\n */\nexport function getAllCookies(matchRegex) {\n    return decodeURIComponent(document.cookie).split(';').map(cookiePair => {\n        const keyValuePair = cookiePair.split('=');\n        const key = trim(keyValuePair[0]);\n        const value = keyValuePair[1];\n        return { key, value };\n    }).filter(obj => {\n        return !!obj.key.match(matchRegex);\n    });\n}\n\n/**\n * Removes a cookie\n * @param {string} key name of cookie\n * @param {string} path url path\n * @param {string} domain supported domain\n */\nexport function removeCookie(key, path, domain) {\n    const currentValue = getCookie.apply(this, [key]);\n    if (key && currentValue.length) {\n        path = setDefault(path, '/');\n        domain = setDefault(domain, loc.hostname);\n        const cookieDomain = LOCAL_ENV.indexOf(domain) === -1 ? `; domain=${domain.trim()}` : '';\n        const deletedCookieString = `${key}=; expires=${COOKIE_DEL_DATE}${cookieDomain}; path=${path}`;\n        document.cookie = deletedCookieString;\n        return !trim(getCookie.apply(this, [key])).length;\n    }\n    return false;\n}","export const f = String.fromCharCode;","import { f } from './fromCharCode';\nimport { hasOwn } from '../api/vars';\n\nfunction _updateContext(context, bitsPerChar, getCharFromInt) {\n    if (hasOwn.call(context.context_dictionaryToCreate, context.context_w)) {\n        if (context.context_w.charCodeAt(0) < 256) {\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1);\n                if (context.context_data_position == bitsPerChar - 1) {\n                    context.context_data_position = 0;\n                    context.context_data.push(getCharFromInt(context.context_data_val));\n                    context.context_data_val = 0;\n                } else {\n                    context.context_data_position++;\n                }\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 8; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                if (context.context_data_position == bitsPerChar - 1) {\n                    context.context_data_position = 0;\n                    context.context_data.push(getCharFromInt(context.context_data_val));\n                    context.context_data_val = 0;\n                } else {\n                    context.context_data_position++;\n                }\n                context.value = context.value >> 1;\n            }\n        } else {\n            context.value = 1;\n            for (let i = 0; i < context.context_numBits; i++) {\n                context.context_data_val = (context.context_data_val << 1) | context.value;\n                if (context.context_data_position == bitsPerChar - 1) {\n                    context.context_data_position = 0;\n                    context.context_data.push(getCharFromInt(context.context_data_val));\n                    context.context_data_val = 0;\n                } else {\n                    context.context_data_position++;\n                }\n                context.value = 0;\n            }\n            context.value = context.context_w.charCodeAt(0);\n            for (let i = 0; i < 16; i++) {\n                context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n                if (context.context_data_position == bitsPerChar - 1) {\n                    context.context_data_position = 0;\n                    context.context_data.push(getCharFromInt(context.context_data_val));\n                    context.context_data_val = 0;\n                } else {\n                    context.context_data_position++;\n                }\n                context.value = context.value >> 1;\n            }\n        }\n        context.context_enlargeIn--;\n        if (context.context_enlargeIn == 0) {\n            context.context_enlargeIn = Math.pow(2, context.context_numBits);\n            context.context_numBits++;\n        }\n        delete context.context_dictionaryToCreate[context.context_w];\n    } else {\n        context.value = context.context_dictionary[context.context_w];\n        for (let i = 0; i < context.context_numBits; i++) {\n            context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n            if (context.context_data_position == bitsPerChar - 1) {\n                context.context_data_position = 0;\n                context.context_data.push(getCharFromInt(context.context_data_val));\n                context.context_data_val = 0;\n            } else {\n                context.context_data_position++;\n            }\n            context.value = context.value >> 1;\n        }\n    }\n    context.context_enlargeIn--;\n    if (context.context_enlargeIn == 0) {\n        context.context_enlargeIn = Math.pow(2, context.context_numBits);\n        context.context_numBits++;\n    }\n}\n\nfunction compress(uncompressed = '', bitsPerChar, getCharFromInt) {\n    if (uncompressed === null) {\n        return '';\n    }\n    const context = {\n        context_dictionary: {},\n        context_dictionaryToCreate: {},\n        context_data: [],\n        context_c: \"\",\n        context_wc: \"\",\n        context_w: \"\",\n        context_enlargeIn: 2,\n        context_dictSize: 3,\n        context_numBits: 2,\n        context_data_val: 0,\n        context_data_position: 0\n    };\n    let i = 0;\n    for (let ii = 0; ii < uncompressed.length; ii += 1) {\n        context.context_c = uncompressed.charAt(ii);\n        if (!hasOwn.call(context.context_dictionary, context.context_c)) {\n            context.context_dictionary[context.context_c] = context.context_dictSize++;\n            context.context_dictionaryToCreate[context.context_c] = true;\n        }\n        context.context_wc = context.context_w + context.context_c;\n        if (hasOwn.call(context.context_dictionary, context.context_wc)) {\n            context.context_w = context.context_wc;\n        } else {\n            _updateContext(context, bitsPerChar, getCharFromInt);\n            context.context_dictionary[context.context_wc] = context.context_dictSize++;\n            context.context_w = String(context.context_c);\n        }\n    }\n    if (context.context_w !== \"\") {\n        _updateContext(context, bitsPerChar, getCharFromInt);\n    }\n    context.value = 2;\n    for (i = 0; i < context.context_numBits; i++) {\n        context.context_data_val = (context.context_data_val << 1) | (context.value & 1);\n        if (context.context_data_position == bitsPerChar - 1) {\n            context.context_data_position = 0;\n            context.context_data.push(getCharFromInt(context.context_data_val));\n            context.context_data_val = 0;\n        } else {\n            context.context_data_position++;\n        }\n        context.value = context.value >> 1;\n    }\n    // Flush the last char\n    while (true) {\n        context.context_data_val = (context.context_data_val << 1);\n        if (context.context_data_position == bitsPerChar - 1) {\n            context.context_data.push(getCharFromInt(context.context_data_val));\n            break;\n        }\n        else context.context_data_position++;\n    }\n    return context.context_data.join('');\n}\n\nfunction compressImpl(uncompressed = '') {\n    if (uncompressed === null) {\n        return '';\n    }\n    return compress(uncompressed, 16, (a) => f(a));\n}\n\nexport default compress;\nexport { compressImpl };","import { f } from './fromCharCode';\n\nfunction decompress(length, resetValue, getNextValue) {\n    const dictionary = [];\n    const data = {\n        val: getNextValue(0),\n        position: resetValue,\n        index: 1\n    };\n    const result = [];\n    let next;\n    let enlargeIn = 4;\n    let dictSize = 4;\n    let numBits = 3;\n    let entry = \"\";\n    let w;\n    let resb;\n    let c;\n\n    for (let i = 0; i < 3; i += 1) {\n        dictionary[i] = i;\n    }\n    let bits = 0;\n    let maxpower = Math.pow(2, 2);\n    let power = 1;\n    while (power !== maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position === 0) {\n            data.position = resetValue;\n            data.val = getNextValue(data.index++);\n        }\n        bits |= (resb > 0 ? 1 : 0) * power;\n        power <<= 1;\n    }\n    next = bits;\n    switch (next) {\n        case 0:\n            bits = 0;\n            maxpower = Math.pow(2, 8);\n            power = 1;\n            while (power !== maxpower) {\n                resb = data.val & data.position;\n                data.position >>= 1;\n                if (data.position === 0) {\n                    data.position = resetValue;\n                    data.val = getNextValue(data.index++);\n                }\n                bits |= (resb > 0 ? 1 : 0) * power;\n                power <<= 1;\n            }\n            c = f(bits);\n            break;\n        case 1:\n            bits = 0;\n            maxpower = Math.pow(2, 16);\n            power = 1;\n            while (power !== maxpower) {\n                resb = data.val & data.position;\n                data.position >>= 1;\n                if (data.position === 0) {\n                    data.position = resetValue;\n                    data.val = getNextValue(data.index++);\n                }\n                bits |= (resb > 0 ? 1 : 0) * power;\n                power <<= 1;\n            }\n            c = f(bits);\n            break;\n        case 2:\n            return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n        if (data.index > length) {\n            return \"\";\n        }\n        bits = 0;\n        maxpower = Math.pow(2, numBits);\n        power = 1;\n        while (power !== maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position === 0) {\n                data.position = resetValue;\n                data.val = getNextValue(data.index++);\n            }\n            bits |= (resb > 0 ? 1 : 0) * power;\n            power <<= 1;\n        }\n        switch (c = bits) {\n            case 0:\n                bits = 0;\n                maxpower = Math.pow(2, 8);\n                power = 1;\n                while (power !== maxpower) {\n                    resb = data.val & data.position;\n                    data.position >>= 1;\n                    if (data.position === 0) {\n                        data.position = resetValue;\n                        data.val = getNextValue(data.index++);\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power;\n                    power <<= 1;\n                }\n\n                dictionary[dictSize++] = f(bits);\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 1:\n                bits = 0;\n                maxpower = Math.pow(2, 16);\n                power = 1;\n                while (power !== maxpower) {\n                    resb = data.val & data.position;\n                    data.position >>= 1;\n                    if (data.position === 0) {\n                        data.position = resetValue;\n                        data.val = getNextValue(data.index++);\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power;\n                    power <<= 1;\n                }\n                dictionary[dictSize++] = f(bits);\n                c = dictSize - 1;\n                enlargeIn--;\n                break;\n            case 2:\n                return result.join('');\n        }\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n        if (dictionary[c]) {\n            entry = dictionary[c];\n        } else {\n            if (c === dictSize) {\n                entry = w + w.charAt(0);\n            } else {\n                return null;\n            }\n        }\n        result.push(entry);\n        dictionary[dictSize++] = w + entry.charAt(0);\n        enlargeIn--;\n        w = entry;\n        if (enlargeIn === 0) {\n            enlargeIn = Math.pow(2, numBits);\n            numBits++;\n        }\n    }\n}\n\nfunction decompressImpl(compressed = '') {\n    if (compressed === null) {\n        return '';\n    }\n    if (compressed === '') {\n        return null;\n    }\n    return decompress(compressed, 32768, (index) => compressed.charCodeAt(index));\n}\n\nexport default decompress;\nexport { decompressImpl };","import compress from './compress';\nimport decompress from './decompress';\nimport { f } from './fromCharCode';\n\nexport function toUTF16(input = '') {\n    if (input === null) {\n        return '';\n    }\n    return compress(input, 15, (a) => f(a + 32)) + ' ';\n}\n\nexport function fromUTF16(compressed = '') {\n    if (compress === null) {\n        return '';\n    }\n    if (compress === '') {\n        return null;\n    }\n    return decompress(compressed.length, 16384, (index) => (compressed.charCodeAt(index) - 32));\n}","import { ls, ss, hasOwn } from './vars';\nimport { assign, tryParse } from './helpers';\nimport { toUTF16, fromUTF16 } from '../modules/utf16';\nimport { setCookie, getCookie, removeCookie } from './cookies';\nimport { types } from './constants';\n\n/**\n * Tests availability of storage API\n */\nfunction isAvailable() {\n    try {\n        ls.setItem('test', 'test');\n        ls.removeItem('test');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * Sets storage value\n * @param {string} key Key\n * @param {string} value Value\n * @param {string} isSession Flag to store in session storage\n */\nfunction setValue(key, value, isSession) {\n    if (key && typeof value !== 'undefined') {\n        if (typeof value === 'object' && value) {\n            value = JSON.stringify(value);\n        }\n        if (this.available) {\n            const storageObj = isSession ? ss : ls;\n            try {\n                storageObj.setItem(\n                    key,\n                    (this.config.compress ? toUTF16(value) : value)\n                );\n            } catch (e) {\n                setCookie(key, value, isSession ? undefined : Infinity);\n            }\n        } else {\n            setCookie(key, value, isSession ? undefined : Infinity);\n        }\n    }\n}\n\n/**\n * Gets all saved values from storages\n * @param {string} key Key\n */\nfunction getAllMatched(key) {\n    const allValues = [];\n    try {\n        // Local and Session storage\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                if (hasOwn.call(storageType, key)) {\n                    const value = storageType.getItem(key);\n                    allValues.push({\n                        key,\n                        value: tryParse(this.config.compress ? fromUTF16(value) : value),\n                        type: types[storageType === ls ? 'LS' : 'SS']\n                    });\n                }\n            });\n        }\n        // Cookies\n        const value = getCookie(key);\n        if (value) {\n            allValues.push({\n                key,\n                value: tryParse(value),\n                type: types.CC\n            });\n        }\n    } catch (e) {\n        throw new TypeError(e.message);\n    }\n    return allValues;\n}\n\n/**\n * Removes all keys\n * @param {object|string} matchRegex Regular expression to match keys to be deleted\n */\nfunction deleteKey(key) {\n    try {\n        let hasValues = false;\n        if (this.available) {\n            [ls, ss].forEach(storageType => {\n                hasValues = hasValues || !!storageType.getItem(key);\n            });\n            if (hasValues) {\n                [ls, ss].forEach(storageType => {\n                    storageType.removeItem(key);\n                });\n            }\n        }\n        const cookieRemoved = removeCookie(key);\n        return (hasValues || cookieRemoved);\n    } catch (e) {\n        return removeCookie(key);\n    }\n}\n\n/**\n * Storage class\n * @class ArgonStorage\n */\nexport class ArgonStorage {\n    constructor(config) {\n        this.config = Object.freeze(assign({ compress: false }, config));\n        this.available = isAvailable();\n    }\n    set() {\n        return setValue.apply(this, arguments);\n    }\n    get() {\n        const matched = this.getAll.apply(this, arguments).filter(obj => {\n            if (arguments[1]) {\n                return obj.type === types.SS;\n            }\n            return true;\n        });\n        if (matched.length > 0) {\n            return matched[0].value;\n        }\n        return;\n    }\n    getAll() {\n        return getAllMatched.apply(this, arguments);\n    }\n    remove() {\n        return deleteKey.apply(this, arguments);\n    }\n}"],"names":["isObject","value","setDefault","defaultValue","trim","loopFunc","ref","target","Object","keys","forEach","key","assign","i","arguments","length","each","arrayObj","callback","index","continueTheLoop","apply","tryParse","JSON","parse","e","loc","window","location","ls","localStorage","ss","sessionStorage","hasOwn","prototype","hasOwnProperty","MAX_END_DATE","COOKIE_DEL_DATE","MILLISECOND_MULTIPLIER","LOCAL_ENV","types","SS","LS","CC","setCookie","expiryDays","path","domain","isSecure","hostname","transformedValue","stringify","expiryDate","Date","Infinity","setTime","getTime","expires","toUTCString","cookiePath","cookieDomain","indexOf","secureFlag","protocol","document","cookie","getCookie","trimResult","cookieStr","decodeURIComponent","split","cookiePair","keyPart","indexOfKey","substring","getAllCookies","matchRegex","map","keyValuePair","filter","obj","match","removeCookie","currentValue","deletedCookieString","f","String","fromCharCode","_updateContext","context","bitsPerChar","getCharFromInt","call","context_dictionaryToCreate","context_w","charCodeAt","context_numBits","context_data_val","context_data_position","context_data","push","context_enlargeIn","Math","pow","context_dictionary","compress","uncompressed","context_c","context_wc","context_dictSize","ii","charAt","join","decompress","resetValue","getNextValue","dictionary","data","val","position","result","next","enlargeIn","dictSize","numBits","entry","w","resb","c","bits","maxpower","power","toUTF16","input","a","fromUTF16","compressed","isAvailable","setItem","removeItem","setValue","isSession","available","storageObj","config","undefined","getAllMatched","allValues","storageType","getItem","type","TypeError","message","deleteKey","hasValues","cookieRemoved","ArgonStorage","freeze","matched","getAll"],"mappings":"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"}